(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof module=="object"&&module.exports?module.exports=t():e.htmx=e.htmx||t()})(typeof self!="undefined"?self:this,function(){return function(){"use strict";var j,x,k,U,Y,Z,t={onLoad:Qt,process:ae,on:St,off:At,trigger:n,ajax:Se,find:y,findAll:C,closest:R,values:function(e,t){var n=V(e,t||"post");return n.values},remove:Pe,addClass:I,removeClass:H,toggleClass:Wt,takeClass:pn,defineExtension:yn,removeExtension:_n,logAll:Xt,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1},parseInterval:O,_:Jt,createEventSource:function(e){return new EventSource(e,{withCredentials:!0})},createWebSocket:function(e){var n=new WebSocket(e,[]);return n.binaryType=t.config.wsBinaryType,n},version:"1.9.2"},He,Be,se,wn,_e,Fe,Te,be,On={addTriggerHandler:re,bodyContains:d,canAccessLocalStorage:he,filterValues:de,hasAttribute:Q,getAttributeValue:a,getClosestMatch:A,getExpressionVars:we,getHeaders:le,getInputValues:V,getInternalData:s,getSwapSpecification:ue,getTriggerSpecs:ve,getTarget:te,makeFragment:z,mergeObjects:l,makeSettleInfo:w,oobSwap:K,selectAndSwap:ye,settleImmediately:D,shouldCancel:fe,triggerEvent:n,triggerErrorEvent:i,withExtensions:E},Ae=["get","post","put","delete","patch"],bn=Ae.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function O(e){return e==null?void 0:e.slice(-2)=="ms"?parseFloat(e.slice(0,-2))||void 0:e.slice(-1)=="s"?parseFloat(e.slice(0,-1))*1e3||void 0:e.slice(-1)=="m"?parseFloat(e.slice(0,-1))*1e3*60||void 0:parseFloat(e)||void 0}function c(e,t){return e.getAttribute&&e.getAttribute(t)}function Q(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function a(e,t){return c(e,t)||c(e,"data-"+t)}function g(e){return e.parentElement}function e(){return document}function A(e,t){for(;e&&!t(e);)e=g(e);return e||null}function st(e,t,n){var o=a(t,n),s=a(t,"hx-disinherit");return e!==t&&s&&(s==="*"||s.split(" ").indexOf(n)>=0)?"unset":o}function u(e,t){var n=null;if(A(e,function(s){return n=st(e,s,t)}),n!=="unset")return n}function m(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function hn(e){var n=/<([a-z][^/\0>\x20\t\r\n\f]*)/i,t=n.exec(e);return t?t[1].toLowerCase():""}function _(t,n){for(var o=new DOMParser,i=o.parseFromString(t,"text/html"),s=i.body;n>0;)n--,s=s.firstChild;return s==null&&(s=e().createDocumentFragment()),s}function ln(e){return e.match(/<body/)}function z(e){var n,s,o=!ln(e);if(t.config.useTemplateFragments&&o)return n=_("<body><template>"+e+"</template></body>",0),n.querySelector("template").content;switch(s=hn(e),s){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return _("<table>"+e+"</table>",1);case"col":return _("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return _("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return _("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return _("<div>"+e+"</div>",1);default:return _(e,0)}}function f(e){e&&e()}function $(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function ee(e){return $(e,"Function")}function an(e){return $(e,"Object")}function s(e){var n="htmx-internal-data",t=e[n];return t||(t=e[n]={}),t}function ge(e){var t,n=[];if(e)for(t=0;t<e.length;t++)n.push(e[t]);return n}function o(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n])}function on(e){var t=e.getBoundingClientRect(),n=t.top,s=t.bottom;return n<window.innerHeight&&s>=0}function d(t){return t.getRootNode&&t.getRootNode()instanceof ShadowRoot?e().body.contains(t.getRootNode().host):e().body.contains(t)}function pe(e){return e.trim().split(/\s+/)}function l(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function S(e){try{return JSON.parse(e)}catch(e){return b(e),null}}function he(){var e="htmx:localStorageTest";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}function Me(e){try{var t=new URL(e);return t&&(e=t.pathname+t.search),e.match("^/$")||(e=e.replace(/\/+$/,"")),e}catch{return e}}function Jt(t){return je(e().body,function(){return eval(t)})}function Qt(e){var n=t.on("htmx:load",function(t){e(t.detail.elt)});return n}function Xt(){t.logger=function(e,t,n){console&&console.log(t,e,n)}}function y(t,n){return n?t.querySelector(n):y(e(),t)}function C(t,n){return n?t.querySelectorAll(n):C(e(),t)}function Pe(e,t){e=h(e),t?setTimeout(function(){Pe(e),e=null},t):e.parentElement.removeChild(e)}function I(e,t,n){e=h(e),n?setTimeout(function(){I(e,t),e=null},n):e.classList&&e.classList.add(t)}function H(e,t,n){e=h(e),n?setTimeout(function(){H(e,t),e=null},n):e.classList&&(e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class"))}function Wt(e,t){e=h(e),e.classList.toggle(t)}function pn(e,t){e=h(e),o(e.parentElement.children,function(e){H(e,t)}),I(e,t)}function R(e,t){if(e=h(e),e.closest)return e.closest(t);do if(e==null||m(e,t))return e;while(e=e&&g(e))return null}function L(e){var t=e.trim();return t.startsWith("<")&&t.endsWith("/>")?t.substring(1,t.length-2):t}function W(t,n){return n.indexOf("closest ")===0?[R(t,L(n.substr(8)))]:n.indexOf("find ")===0?[y(t,L(n.substr(5)))]:n.indexOf("next ")===0?[He(t,L(n.substr(5)))]:n.indexOf("previous ")===0?[Be(t,L(n.substr(9)))]:n==="document"?[document]:n==="window"?[window]:e().querySelectorAll(L(n))}He=function(t,n){for(var o,i=e().querySelectorAll(n),s=0;s<i.length;s++)if(o=i[s],o.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_PRECEDING)return o},Be=function(t,n){for(var o,i=e().querySelectorAll(n),s=i.length-1;s>=0;s--)if(o=i[s],o.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING)return o};function T(t,n){return n?W(t,n)[0]:W(e().body,t)[0]}function h(e){return $(e,"String")?y(e):e}function Ve(t,n,s){return ee(n)?{target:e().body,event:t,listener:n}:{target:h(t),event:n,listener:s}}function St(e,t,n){Oe(function(){var s=Ve(e,t,n);s.target.addEventListener(s.event,s.listener)});var s=ee(t);return s?t:n}function At(e,t,n){return Oe(function(){var s=Ve(e,t,n);s.target.removeEventListener(s.event,s.listener)}),ee(t)?t:n}se=e().createElement("output");function $e(e,t){var s,n=u(e,t);if(n)return n==="this"?[ne(e,t)]:(s=W(e,n),s.length===0?(b('The selector "'+n+'" on '+t+" returned no matches!"),[se]):s)}function ne(e,t){return A(e,function(e){return a(e,t)!=null})}function te(t){var o,n=u(t,"hx-target");return n?n==="this"?ne(t,"hx-target"):T(t,n):(o=s(t),o.boosted?e().body:t)}function ke(e){for(var s=t.config.attributesToSettle,n=0;n<s.length;n++)if(e===s[n])return!0;return!1}function Ye(e,t){o(e.attributes,function(n){!t.hasAttribute(n.name)&&ke(n.name)&&e.removeAttribute(n.name)}),o(t.attributes,function(t){ke(t.name)&&e.setAttribute(t.name,t.value)})}function Ot(e,t){for(var o,s=J(t),n=0;n<s.length;n++){o=s[n];try{if(o.isInlineSwap(e))return!0}catch(e){b(e)}}return e==="outerHTML"}function K(t,s,a){var c,l="#"+s.id,r="outerHTML";return t==="true"||(t.indexOf(":")>0?(r=t.substr(0,t.indexOf(":")),l=t.substr(t.indexOf(":")+1,t.length)):r=t),c=e().querySelectorAll(l),c?(o(c,function(t){var i,l=s.cloneNode(!0),c=e().createDocumentFragment();if(c.appendChild(l),Ot(r,t)||(c=l),i={shouldSwap:!0,target:t,fragment:c},!n(t,"htmx:oobBeforeSwap",i))return;t=i.target,i.shouldSwap&&xe(r,t,t,c,a),o(a.elts,function(e){n(e,"htmx:oobAfterSwap",i)})}),s.parentNode.removeChild(s)):(s.parentNode.removeChild(s),i(e().body,"htmx:oobErrorNoTarget",{content:s})),t}function _t(e,t,n){var s,i,r,c,d,l=u(e,"hx-select-oob");if(l){i=l.split(",");for(let e=0;e<i.length;e++)r=i[e].split(":",2),s=r[0].trim(),s.indexOf("#")===0&&(s=s.substring(1)),d=r[1]||"true",c=t.querySelector("#"+s),c&&K(d,c,n)}o(C(t,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=a(e,"hx-swap-oob");t!=null&&K(t,e,n)})}function ut(t){o(C(t,"[hx-preserve], [data-hx-preserve]"),function(t){var s=a(t,"id"),n=e().getElementById(s);n!=null&&t.parentNode.replaceChild(n,t)})}function rt(e,t,n){o(t.querySelectorAll("[id]"),function(t){if(t.id&&t.id.length>0){var o,i=t.id.replace("'","\\'"),a=t.tagName.replace(":","\\:"),s=e.querySelector(a+"[id='"+i+"']");s&&s!==e&&(o=t.cloneNode(),Ye(t,s),n.tasks.push(function(){Ye(t,o)}))}})}function Ge(e){return function(){H(e,t.config.addedClass),ae(e),mt(e),xt(e),n(e,"htmx:load")}}function xt(e){var t="[autofocus]",n=m(e,t)?e:e.querySelector(t);n!=null&&n.focus()}function M(e,n,s,o){for(rt(e,s,o);s.childNodes.length>0;){var i=s.firstChild;I(i,t.config.addedClass),e.insertBefore(i,n),i.nodeType!==Node.TEXT_NODE&&i.nodeType!==Node.COMMENT_NODE&&o.tasks.push(Ge(i))}}function qe(e,t){for(var n=0;n<e.length;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t}function Ke(e){var n,s,t=0;if(e.attributes)for(n=0;n<e.attributes.length;n++)s=e.attributes[n],s.value&&(t=qe(s.name,t),t=qe(s.value,t));return t}function We(e){var t=s(e);if(t.timeout&&clearTimeout(t.timeout),t.webSocket&&t.webSocket.close(),t.sseEventSource&&t.sseEventSource.close(),t.listenerInfos&&o(t.listenerInfos,function(e){e.on&&e.on.removeEventListener(e.trigger,e.listener)}),t.onHandlers)for(let n=0;n<t.onHandlers.length;n++){const s=t.onHandlers[n];e.removeEventListener(s.name,s.handler)}}function N(e){n(e,"htmx:beforeCleanupElement"),We(e),e.children&&o(e.children,function(e){N(e)})}function Dt(e,t,n){if(e.tagName==="BODY")return X(e,t,n);var o,i=e.previousSibling;for(M(g(e),e,t,n),i==null?o=g(e).firstChild:o=i.nextSibling,s(e).replacedWith=o,n.elts=[];o&&o!==e;)o.nodeType===Node.ELEMENT_NODE&&n.elts.push(o),o=o.nextElementSibling;N(e),g(e).removeChild(e)}function Rt(e,t,n){return M(e,e.firstChild,t,n)}function Kt(e,t,n){return M(g(e),e,t,n)}function qt(e,t,n){return M(e,null,t,n)}function en(e,t,n){return M(g(e),e.nextSibling,t,n)}function nn(e){return N(e),g(e).removeChild(e)}function X(e,t,n){var s=e.firstChild;if(M(e,s,t,n),s){for(;s.nextSibling;)N(s.nextSibling),e.removeChild(s.nextSibling);N(s),e.removeChild(s)}}function mn(t,n){var s,i=u(t,"hx-select");return i&&(s=e().createDocumentFragment(),o(n.querySelectorAll(i),function(e){s.appendChild(e)}),n=s),n}function xe(e,n,s,o,i){switch(e){case"none":return;case"outerHTML":Dt(s,o,i);return;case"afterbegin":Rt(s,o,i);return;case"beforebegin":Kt(s,o,i);return;case"beforeend":qt(s,o,i);return;case"afterend":en(s,o,i);return;case"delete":nn(s,o,i);return;default:for(var a,c,l,u,d=J(n),r=0;r<d.length;r++){u=d[r];try{if(a=u.handleSwap(e,s,o,i),a){if(typeof a.length!="undefined")for(c=0;c<a.length;c++)l=a[c],l.nodeType!==Node.TEXT_NODE&&l.nodeType!==Node.COMMENT_NODE&&i.tasks.push(Ge(l));return}}catch(e){b(e)}}e==="innerHTML"?X(s,o,i):xe(t.config.defaultSwapStyle,n,s,o,i)}}function Ue(e){if(e.indexOf("<title")>-1){var n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),t=n.match(/<title(\s[^>]*>|>)([\s\S]*?)<\/title>/im);if(t)return t[2]}}function ye(e,t,n,s,o){o.title=Ue(s);var i=z(s);if(i)return _t(n,i,o),i=mn(n,i),ut(i),xe(e,n,t,i,o)}function Ce(e,t,s){var o,i,r,a=e.getResponseHeader(t);if(a.indexOf("{")===0){i=S(a);for(r in i)i.hasOwnProperty(r)&&(o=i[r],an(o)||(o={value:o}),n(s,r,o))}else n(s,a,[])}wn=/\s/,j=/[\s,]/,_e=/[_$a-zA-Z]/,Fe=/[_$a-zA-Z0-9]/,Te=['"',"'","/"],x=/[^\s]/;function De(e){for(var n,o,i,s=[],t=0;t<e.length;){if(_e.exec(e.charAt(t))){for(n=t;Fe.exec(e.charAt(t+1));)t++;s.push(e.substr(n,t-n+1))}else if(Te.indexOf(e.charAt(t))!==-1){for(o=e.charAt(t),n=t,t++;t<e.length&&e.charAt(t)!==o;)e.charAt(t)==="\\"&&t++,t++;s.push(e.substr(n,t-n+1))}else i=e.charAt(t),s.push(i);t++}return s}function Yt(e,t,n){return _e.exec(e.charAt(0))&&e!=="true"&&e!=="false"&&e!=="this"&&e!==n&&t!=="."}function Le(t,n,s){if(n[0]==="["){n.shift();for(var a,l,r=1,o=" return (function("+s+"){ return (",c=null;n.length>0;){if(a=n[0],a==="]"){if(r--,r===0){c===null&&(o=o+"true"),n.shift(),o+=")})";try{return l=je(t,function(){return Function(o)()},function(){return!0}),l.source=o,l}catch(t){return i(e().body,"htmx:syntax:error",{error:t,source:o}),null}}}else a==="["&&r++;Yt(a,c,s)?o+="(("+s+"."+a+") ? ("+s+"."+a+") : (window."+a+"))":o=o+a,c=n.shift()}}}function r(e,t){for(var n="";e.length>0&&!e[0].match(t);)n+=e.shift();return n}be="input, textarea, select";function ve(e){var t,n,s,o,c,l,u,f,h=a(e,"hx-trigger"),d=[];if(h){t=De(h);do{if(r(t,x),f=t.length,c=r(t,/[,[\s]/),c!=="")if(c==="every")u={trigger:"every"},r(t,x),u.pollInterval=O(r(t,/[,[\s]/)),r(t,x),l=Le(e,t,"event"),l&&(u.eventFilter=l),d.push(u);else if(c.indexOf("sse:")===0)d.push({trigger:"sse",sseEvent:c.substr(4)});else{for(n={trigger:c},l=Le(e,t,"event"),l&&(n.eventFilter=l);t.length>0&&t[0]!==",";)r(t,x),s=t.shift(),s==="changed"?n.changed=!0:s==="once"?n.once=!0:s==="consume"?n.consume=!0:s==="delay"&&t[0]===":"?(t.shift(),n.delay=O(r(t,j))):s==="from"&&t[0]===":"?(t.shift(),o=r(t,j),(o==="closest"||o==="find"||o==="next"||o==="previous")&&(t.shift(),o+=" "+r(t,j)),n.from=o):s==="target"&&t[0]===":"?(t.shift(),n.target=r(t,j)):s==="throttle"&&t[0]===":"?(t.shift(),n.throttle=O(r(t,j))):s==="queue"&&t[0]===":"?(t.shift(),n.queue=r(t,j)):(s==="root"||s==="threshold")&&t[0]===":"?(t.shift(),n[s]=r(t,j)):i(e,"htmx:syntax:error",{token:t.shift()});d.push(n)}t.length===f&&i(e,"htmx:syntax:error",{token:t.shift()}),r(t,x)}while(t[0]===","&&t.shift())}return d.length>0?d:m(e,"form")?[{trigger:"submit"}]:m(e,'input[type="button"]')?[{trigger:"click"}]:m(e,be)?[{trigger:"change"}]:[{trigger:"click"}]}function Nt(e){s(e).cancelled=!0}function Ee(e,t,n){var o=s(e);o.timeout=setTimeout(function(){d(e)&&o.cancelled!==!0&&(me(n,G("hx:poll:trigger",{triggerSpec:n,target:e}))||t(e),Ee(e,t,n))},n.pollInterval)}function Mt(e){return location.hostname===e.hostname&&c(e,"href")&&c(e,"href").indexOf("#")!==0}function kt(e,t,n){if(e.tagName==="A"&&Mt(e)&&(e.target===""||e.target==="_self")||e.tagName==="FORM"){if(t.boosted=!0,e.tagName==="A")s="get",o=e.href;else{var s,o,i=c(e,"method");s=i?i.toLowerCase():"get",s==="get",o=c(e,"action")}n.forEach(function(n){q(e,function(e,t){v(s,o,e,t)},t,n,!0)})}}function fe(e,t){if(e.type==="submit"||e.type==="click"){if(t.tagName==="FORM")return!0;if(m(t,'input[type="submit"], button')&&R(t,"form")!==null)return!0;if(t.tagName==="A"&&t.href&&(t.getAttribute("href")==="#"||t.getAttribute("href").indexOf("#")!==0))return!0}return!1}function Et(e,t){return s(e).boosted&&e.tagName==="A"&&t.type==="click"&&(t.ctrlKey||t.metaKey)}function me(t,n){var s=t.eventFilter;if(s)try{return s(n)!==!0}catch(t){return i(e().body,"htmx:eventFilter:error",{error:t,source:s.source}),!0}return!1}function q(e,t,i,a,r){var l,c=s(e);a.from?l=W(e,a.from):l=[e],a.changed&&(c.lastValue=e.value),o(l,function(o){var l=function(i){if(!d(e)){o.removeEventListener(a.trigger,l);return}if(Et(e,i))return;if((r||fe(i,e))&&i.preventDefault(),me(a,i))return;var u=s(i);if(u.triggerSpec=a,u.handledFor==null&&(u.handledFor=[]),u.handledFor.indexOf(e)<0){if(u.handledFor.push(e),a.consume&&i.stopPropagation(),a.target&&i.target&&!m(i.target,a.target))return;if(a.once){if(c.triggeredOnce)return;c.triggeredOnce=!0}if(a.changed){if(c.lastValue===e.value)return;c.lastValue=e.value}if(c.delayed&&clearTimeout(c.delayed),c.throttle)return;a.throttle?c.throttle||(t(e,i),c.throttle=setTimeout(function(){c.throttle=null},a.throttle)):a.delay?c.delayed=setTimeout(function(){t(e,i)},a.delay):(n(e,"htmx:trigger"),t(e,i))}};i.listenerInfos==null&&(i.listenerInfos=[]),i.listenerInfos.push({trigger:a.trigger,listener:l,on:o}),o.addEventListener(a.trigger,l)})}Y=!1,U=null;function yt(){U||(U=function(){Y=!0},window.addEventListener("scroll",U),setInterval(function(){Y&&(Y=!1,o(e().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){Qe(e)}))},200))}function Qe(e){if(!Q(e,"data-hx-revealed")&&on(e)){e.setAttribute("data-hx-revealed","true");var t=s(e);t.initHash?n(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(){n(e,"revealed")},{once:!0})}}function ht(e,t,n){for(var s,i=pe(n),o=0;o<i.length;o++)s=i[o].split(/:(.+)/),s[0]==="connect"&&Je(e,s[1],0),s[0]==="send"&&ct(e)}function Je(e,n,o){if(!d(e))return;if(n.indexOf("/")==0){var r,c=location.hostname+(location.port?":"+location.port:"");location.protocol=="https:"?n="wss://"+c+n:location.protocol=="http:"&&(n="ws://"+c+n)}r=t.createWebSocket(n),r.onerror=function(t){i(e,"htmx:wsError",{error:t,socket:r}),et(e)},r.onclose=function(t){if([1006,1012,1013].indexOf(t.code)>=0){var s=Ft(o);setTimeout(function(){Je(e,n,o+1)},s)}},r.onopen=function(){o=0},s(e).webSocket=r,r.addEventListener("message",function(t){if(et(e))return;var n,o,i,r,c,s=t.data;E(e,function(t){s=t.transformResponse(s,null,e)}),o=w(e),c=z(s),i=ge(c.children);for(n=0;n<i.length;n++)r=i[n],K(a(r,"hx-swap-oob")||"true",r,o);D(o.tasks)})}function et(e){if(!d(e))return s(e).webSocket.close(),!0}function ct(e){var t=A(e,function(e){return s(e).webSocket!=null});t?e.addEventListener(ve(e)[0].trigger,function(o){var c=s(t).webSocket,d=le(e,t),a=V(e,"post"),i=a.errors,u=a.values,h=we(e),m=l(u,h),r=de(m,e);if(r.HEADERS=d,i&&i.length>0){n(e,"htmx:validation:halted",i);return}c.send(JSON.stringify(r)),fe(o,e)&&o.preventDefault()}):i(e,"htmx:noWebSocketSourceError")}function Ft(e){var s,o,n=t.config.wsReconnectDelay;if(typeof n=="function")return n(e);if(n==="full-jitter")return s=Math.min(e,6),o=1e3*Math.pow(2,s),o*Math.random();b('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function Bt(e,t,n){for(var s,i=pe(n),o=0;o<i.length;o++)s=i[o].split(/:(.+)/),s[0]==="connect"&&ot(e,s[1]),s[0]==="swap"&&it(e,s[1])}function ot(e,n){var o=t.createEventSource(n);o.onerror=function(t){i(e,"htmx:sseError",{error:t,source:o}),ce(e)},s(e).sseEventSource=o}function it(e,t){var o,r,a=A(e,tt);a?(r=s(a).sseEventSource,o=function(s){if(ce(a)){r.removeEventListener(t,o);return}var c,l,d,i=s.data;E(e,function(t){i=t.transformResponse(i,null,e)}),l=ue(e),d=te(e),c=w(e),ye(l.swapStyle,e,d,i,c),D(c.tasks),n(e,"htmx:sseMessage",s)},s(e).sseListener=o,r.addEventListener(t,o)):i(e,"htmx:noSSESourceError")}function at(e,t,n){var o,r,a=A(e,tt);a?(r=s(a).sseEventSource,o=function(){ce(a)||(d(e)?t(e):r.removeEventListener(n,o))},s(e).sseListener=o,r.addEventListener(n,o)):i(e,"htmx:noSSESourceError")}function ce(e){if(!d(e))return s(e).sseEventSource.close(),!0}function tt(e){return s(e).sseEventSource!=null}function lt(e,t,n,s){var o=function(){n.loaded||(n.loaded=!0,t(e))};s?setTimeout(o,s):o()}function dt(e,t,n){var s=!1;return o(Ae,function(o){if(Q(e,"hx-"+o)){var i=a(e,"hx-"+o);s=!0,t.path=i,t.verb=o,n.forEach(function(n){re(e,n,t,function(e,t){v(o,i,e,t)})})}}),s}function re(e,t,s,o){if(t.sseEvent)at(e,o,t.sseEvent);else if(t.trigger==="revealed")yt(),q(e,o,s,t),Qe(e);else if(t.trigger==="intersect"){var a,i={};t.root&&(i.root=T(e,t.root)),t.threshold&&(i.threshold=parseFloat(t.threshold)),a=new IntersectionObserver(function(t){for(var o,s=0;s<t.length;s++)if(o=t[s],o.isIntersecting){n(e,"intersect");break}},i),a.observe(e),q(e,o,s,t)}else t.trigger==="load"?me(t,G("load",{elt:e}))||lt(e,o,s,t.delay):t.pollInterval?(s.polling=!0,Ee(e,o,t)):q(e,o,s,t)}function Ze(n){if(n.type==="text/javascript"||n.type==="module"||n.type===""){var i,s=e().createElement("script");o(n.attributes,function(e){s.setAttribute(e.name,e.value)}),s.textContent=n.textContent,s.async=!1,t.config.inlineScriptNonce&&(s.nonce=t.config.inlineScriptNonce),i=n.parentElement;try{i.insertBefore(s,n)}catch(e){b(e)}finally{n.parentElement&&n.parentElement.removeChild(n)}}}function mt(e){m(e,"script")&&Ze(e),o(C(e,"script"),function(e){Ze(e)})}function ft(){return document.querySelector("[hx-boost], [data-hx-boost]")}function pt(e){if(e.querySelectorAll){var t=ft()?", a, form":"",n=e.querySelectorAll(bn+t+", [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]");return n}return[]}function gt(e){var t=function(t){var o,n=R(t.target,"button, input[type='submit']");n!==null&&(o=s(e),o.lastButtonClicked=n)};e.addEventListener("click",t),e.addEventListener("focusin",t),e.addEventListener("focusout",function(){var n=s(e);n.lastButtonClicked=null})}function vt(e){var n=De(e),t=0;for(let e=0;e<n.length;e++){const s=n[e];s==="{"?t++:s==="}"&&t--}return t}function bt(e,t,n){var i,a,o=s(e);return o.onHandlers=[],i=new Function("event",n+"; return;"),a=e.addEventListener(t,function(t){return i.call(e,t)}),o.onHandlers.push({event:t,listener:a}),{nodeData:o,code:n,func:i,listener:a}}function jt(e){var t,n,s,o,i,r,l,c=a(e,"hx-on");if(c){for(t={},i=c.split(`
`),s=null,r=0;i.length>0;)n=i.shift(),o=n.match(/^\s*([a-zA-Z:-]+:)(.*)/),r===0&&o?(n.split(":"),s=o[1].slice(0,-1),t[s]=o[2]):t[s]+=n,r+=vt(n);for(l in t)bt(e,l,t[l])}}function Xe(e){if(e.closest&&e.closest(t.config.disableSelector))return;var i,r,c,l,o=s(e);o.initHash!==Ke(e)&&(o.initHash=Ke(e),We(e),jt(e),n(e,"htmx:beforeProcessNode"),e.value&&(o.lastValue=e.value),i=ve(e),l=dt(e,o,i),l||(u(e,"hx-boost")==="true"?kt(e,o,i):Q(e,"hx-trigger")&&i.forEach(function(t){re(e,t,o,function(){})})),e.tagName==="FORM"&&gt(e),r=a(e,"hx-sse"),r&&Bt(e,o,r),c=a(e,"hx-ws"),c&&ht(e,o,c),n(e,"htmx:afterProcessNode"))}function ae(e){e=h(e),Xe(e),o(pt(e),function(e){Xe(e)})}function wt(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function G(t,n){var s;return window.CustomEvent&&typeof window.CustomEvent=="function"?s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(s=e().createEvent("CustomEvent"),s.initCustomEvent(t,!0,!0,n)),s}function i(e,t,s){n(e,t,l({error:t},s))}function Ct(e){return e==="htmx:afterProcessNode"}function E(e,t){o(J(e),function(e){try{t(e)}catch(e){b(e)}})}function b(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function n(e,s,o){e=h(e),o==null&&(o={}),o.elt=e;var i,r,c,a=G(s,o);return t.logger&&!Ct(s)&&t.logger(e,s,o),o.error&&(b(o.error),n(e,"htmx:error",{errorInfo:o})),i=e.dispatchEvent(a),r=wt(s),i&&r!==s&&(c=G(r,a.detail),i=i&&e.dispatchEvent(c)),E(e,function(e){i=i&&e.onEvent(s,a)!==!1}),i}k=location.pathname+location.search;function oe(){var t=e().querySelector("[hx-history-elt],[data-hx-history-elt]");return t||e().body}function It(s,o,a,r){if(!he())return;s=Me(s);for(var d,c=S(localStorage.getItem("htmx-history-cache"))||[],l=0;l<c.length;l++)if(c[l].url===s){c.splice(l,1);break}for(d={url:s,content:o,title:a,scroll:r},n(e().body,"htmx:historyItemCreated",{item:d,cache:c}),c.push(d);c.length>t.config.historyCacheSize;)c.shift();for(;c.length>0;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(c));break}catch(t){i(e().body,"htmx:historyCacheError",{cause:t,cache:c}),c.shift()}}function Tt(e){if(!he())return null;e=Me(e);for(var n=S(localStorage.getItem("htmx-history-cache"))||[],t=0;t<n.length;t++)if(n[t].url===e)return n[t];return null}function zt(e){var n=t.config.requestClass,s=e.cloneNode(!0);return o(C(s,"."+n),function(e){H(e,n)}),s.innerHTML}function ie(){var s=oe(),o=k||location.pathname+location.search,i=e().querySelector('[hx-history="false" i],[data-hx-history="false" i]');i||(n(e().body,"htmx:beforeHistorySave",{path:o,historyElt:s}),It(o,zt(s),e().title,window.scrollY)),t.config.historyEnabled&&history.replaceState({htmx:!0},e().title,window.location.href)}function Ie(e){t.config.getCacheBusterParam&&(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(e.endsWith("&")||e.endsWith("?"))&&(e=e.slice(0,-1))),t.config.historyEnabled&&history.pushState({htmx:!0},"",e),k=e}function Vt(e){t.config.historyEnabled&&history.replaceState({htmx:!0},"",e),k=e}function D(e){o(e,function(e){e.call()})}function Pt(t){var s=new XMLHttpRequest,o={path:t,xhr:s};n(e().body,"htmx:historyCacheMiss",o),s.open("GET",t,!0),s.setRequestHeader("HX-History-Restore-Request","true"),s.onload=function(){if(this.status>=200&&this.status<400){n(e().body,"htmx:historyCacheMissLoad",o);var r,s=z(this.response),s=s.querySelector("[hx-history-elt],[data-hx-history-elt]")||s,c=oe(),l=w(c),a=Ue(this.response);a&&(r=y("title"),r?r.innerHTML=a:window.document.title=a),X(c,s,l),D(l.tasks),k=t,n(e().body,"htmx:historyRestore",{path:t,cacheMiss:!0,serverResponse:this.response})}else i(e().body,"htmx:historyCacheMissLoadError",o)},s.send()}function Ht(s){ie(),s=s||location.pathname+location.search;var i,a,r,o=Tt(s);o?(r=z(o.content),i=oe(),a=w(i),X(i,r,a),D(a.tasks),document.title=o.title,window.scrollTo(0,o.scroll),k=s,n(e().body,"htmx:historyRestore",{path:s,item:o})):t.config.refreshOnHistoryMiss?window.location.reload(!0):Pt(s)}function nt(e){var n=$e(e,"hx-indicator");return n==null&&(n=[e]),o(n,function(e){var n=s(e);n.requestCount=(n.requestCount||0)+1,e.classList.add.call(e.classList,t.config.requestClass)}),n}function B(e){o(e,function(e){var n=s(e);n.requestCount=(n.requestCount||0)-1,n.requestCount===0&&e.classList.remove.call(e.classList,t.config.requestClass)})}function Lt(e,t){for(var s,n=0;n<e.length;n++)if(s=e[n],s.isSameNode(t))return!0;return!1}function $t(e){return!(e.name===""||e.name==null||e.disabled)&&!(e.type==="button"||e.type==="submit"||e.tagName==="image"||e.tagName==="reset"||e.tagName==="file")&&(e.type!=="checkbox"&&e.type!=="radio"||e.checked)}function P(e,t,n,s,i){if(s==null||Lt(e,s))return;if(e.push(s),$t(s)){var r,d,l=c(s,"name"),a=s.value;s.multiple&&(a=ge(s.querySelectorAll("option:checked")).map(function(e){return e.value})),s.files&&(a=ge(s.files)),l!=null&&a!=null&&(r=t[l],r!==void 0?Array.isArray(r)?Array.isArray(a)?t[l]=r.concat(a):r.push(a):Array.isArray(a)?t[l]=[r].concat(a):t[l]=[r,a]:t[l]=a),i&&Ut(s,n)}m(s,"form")&&(d=s.elements,o(d,function(s){P(e,t,n,s,i)}))}function Ut(e,t){e.willValidate&&(n(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),n(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function V(e,t){var h,p,u=[],n={},f={},r=[],d=s(e),i=m(e,"form")&&e.noValidate!==!0||a(e,"hx-validate")==="true";return d.lastButtonClicked&&(i=i&&d.lastButtonClicked.formNoValidate!==!0),t!=="get"&&P(u,f,r,R(e,"form"),i),P(u,n,r,e,i),d.lastButtonClicked&&(h=c(d.lastButtonClicked,"name"),h&&(n[h]=d.lastButtonClicked.value)),p=$e(e,"hx-include"),o(p,function(e){P(u,n,r,e,i),m(e,"form")||o(e.querySelectorAll(be),function(e){P(u,n,r,e,i)})}),n=l(n,f),{errors:r,values:n}}function Re(e,t,n){e!==""&&(e+="&"),String(n)==="[object Object]"&&(n=JSON.stringify(n));var s=encodeURIComponent(n);return e+=encodeURIComponent(t)+"="+s,e}function Ne(e){var n,s,t="";for(n in e)e.hasOwnProperty(n)&&(s=e[n],Array.isArray(s)?o(s,function(e){t=Re(t,n,e)}):t=Re(t,n,s));return t}function Gt(e){var t,n,s=new FormData;for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?o(n,function(e){s.append(t,e)}):s.append(t,n));return s}function le(t,n,o){var i={"HX-Request":"true","HX-Trigger":c(t,"id"),"HX-Trigger-Name":c(t,"name"),"HX-Target":a(n,"id"),"HX-Current-URL":e().location.href};return F(t,"hx-headers",!1,i),o!==void 0&&(i["HX-Prompt"]=o),s(t).boosted&&(i["HX-Boosted"]="true"),i}function de(e,t){var s,n=u(t,"hx-params");return n?n==="none"?{}:n==="*"?e:n.indexOf("not ")===0?(o(n.substr(4).split(","),function(t){t=t.trim(),delete e[t]}),e):(s={},o(n.split(","),function(t){t=t.trim(),s[t]=e[t]}),s):e}function Zt(e){return c(e,"href")&&c(e,"href").indexOf("#")>=0}function ue(e,n){var o,a,r,c,l,h,m,f,p,g,d=n||u(e,"hx-swap"),i={swapStyle:s(e).boosted?"innerHTML":t.config.defaultSwapStyle,swapDelay:t.config.defaultSwapDelay,settleDelay:t.config.defaultSettleDelay};if(s(e).boosted&&!Zt(e)&&(i.show="top"),d&&(r=pe(d),r.length>0)){i.swapStyle=r[0];for(c=1;c<r.length;c++)o=r[c],o.indexOf("swap:")===0&&(i.swapDelay=O(o.substr(5))),o.indexOf("settle:")===0&&(i.settleDelay=O(o.substr(7))),o.indexOf("transition:")===0&&(i.transition=o.substr(11)==="true"),o.indexOf("scroll:")===0&&(h=o.substr(7),a=h.split(":"),m=a.pop(),l=a.length>0?a.join(":"):null,i.scroll=m,i.scrollTarget=l),o.indexOf("show:")===0&&(f=o.substr(5),a=f.split(":"),p=a.pop(),l=a.length>0?a.join(":"):null,i.show=p,i.showTarget=l),o.indexOf("focus-scroll:")===0&&(g=o.substr("focus-scroll:".length),i.focusScroll=g=="true")}return i}function ze(e){return u(e,"hx-encoding")==="multipart/form-data"||m(e,"form")&&c(e,"enctype")==="multipart/form-data"}function tn(e,t,n){var s=null;return E(t,function(o){s==null&&(s=o.encodeParameters(e,n,t))}),s??(ze(t)?Gt(n):Ne(n))}function w(e){return{tasks:[],elts:[e]}}function sn(e,n){var s,a,o=e[0],i=e[e.length-1];n.scroll&&(s=null,n.scrollTarget&&(s=T(o,n.scrollTarget)),n.scroll==="top"&&(o||s)&&(s=s||o,s.scrollTop=0),n.scroll==="bottom"&&(i||s)&&(s=s||i,s.scrollTop=s.scrollHeight)),n.show&&(s=null,n.showTarget&&(a=n.showTarget,n.showTarget==="window"&&(a="body"),s=T(o,a)),n.show==="top"&&(o||s)&&(s=s||o,s.scrollIntoView({block:"start",behavior:t.config.scrollBehavior})),n.show==="bottom"&&(i||s)&&(s=s||i,s.scrollIntoView({block:"end",behavior:t.config.scrollBehavior})))}function F(e,t,n,s){if(s==null&&(s={}),e==null)return s;var o,i,r,c,l=a(e,t);if(l){if(o=l.trim(),r=n,o==="unset")return null;o.indexOf("javascript:")===0?(o=o.substr(11),r=!0):o.indexOf("js:")===0&&(o=o.substr(3),r=!0),o.indexOf("{")!==0&&(o="{"+o+"}"),r?i=je(e,function(){return Function("return ("+o+")")()},{}):i=S(o);for(c in i)i.hasOwnProperty(c)&&s[c]==null&&(s[c]=i[c])}return F(g(e),t,n,s)}function je(e,n,s){return t.config.allowEval?n():(i(e,"htmx:evalDisallowedError"),s)}function rn(e,t){return F(e,"hx-vars",!0,t)}function cn(e,t){return F(e,"hx-vals",!1,t)}function we(e){return l(rn(e),cn(e))}function dn(e,t,n){if(n!==null)try{e.setRequestHeader(t,n)}catch{e.setRequestHeader(t,encodeURIComponent(n)),e.setRequestHeader(t+"-URI-AutoEncoded","true")}}function un(t){if(t.responseURL&&typeof URL!="undefined")try{var n=new URL(t.responseURL);return n.pathname+n.search}catch{i(e().body,"htmx:badResponseUrl",{url:t.responseURL})}}function p(e,t){return e.getAllResponseHeaders().match(t)}function Se(e,t,n){return e=e.toLowerCase(),n?n instanceof Element||$(n,"String")?v(e,t,null,null,{targetOverride:h(n),returnPromise:!0}):v(e,t,h(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:h(n.target),swapOverride:n.swap,returnPromise:!0}):v(e,t,null,null,{returnPromise:!0})}function fn(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function v(r,h,m,p,g,b){var j,y,_,w,O,x,C,E,k,A,S,z,D,N,L,R,H,I,$,W,U,K,q,Y,G,X,Q,Z,J,M=null,ce,me,ie,ee,ae,he,oe,re,ue,P=null;if(g=g??{},g.returnPromise&&typeof Promise!="undefined"&&(S=new Promise(function(e,t){M=e,P=t})),m==null&&(m=e().body),ce=g.handler||vn,!d(m))return;if(k=g.targetOverride||te(m),k==null||k==se){i(m,"htmx:targetError",{target:a(m,"hx-target")});return}if(!b&&(me=function(){return v(r,h,m,p,g,!0)},ie={target:k,elt:m,path:h,verb:r,triggeringEvent:p,etc:g,issueRequest:me},n(m,"htmx:confirm",ie)===!1))return;if(D=m,j=s(m),A=u(m,"hx-sync"),x=null,Y=!1,A){if(J=A.split(":"),ee=J[0].trim(),ee==="this"?D=ne(m,"hx-sync"):D=T(m,ee),A=(J[1]||"drop").trim(),j=s(D),A==="drop"&&j.xhr&&j.abortable!==!0)return;if(A==="abort"){if(j.xhr)return;Y=!0}else A==="replace"?n(D,"htmx:abort"):A.indexOf("queue")===0&&(ae=A.split(" "),x=(ae[1]||"last").trim())}if(j.xhr)if(j.abortable)n(D,"htmx:abort");else{x==null&&(p&&(L=s(p),L&&L.triggerSpec&&L.triggerSpec.queue&&(x=L.triggerSpec.queue)),x==null&&(x="last")),j.queuedRequests==null&&(j.queuedRequests=[]),x==="first"&&j.queuedRequests.length===0?j.queuedRequests.push(function(){v(r,h,m,p,g)}):x==="all"?j.queuedRequests.push(function(){v(r,h,m,p,g)}):x==="last"&&(j.queuedRequests=[],j.queuedRequests.push(function(){v(r,h,m,p,g)}));return}if(y=new XMLHttpRequest,j.xhr=y,j.abortable=Y,O=function(){if(j.xhr=null,j.abortable=!1,j.queuedRequests!=null&&j.queuedRequests.length>0){var e=j.queuedRequests.shift();e()}},X=u(m,"hx-prompt"),X&&($=prompt(X),$===null||!n(m,"htmx:prompt",{prompt:$,target:k})))return f(M),O(),S;if(q=u(m,"hx-confirm"),q&&!confirm(q))return f(M),O(),S;if(E=le(m,k,$),g.headers&&(E=l(E,g.headers)),U=V(m,r),N=U.errors,W=U.values,g.values&&(W=l(W,g.values)),he=we(m),G=l(W,he),z=de(G,m),r!=="get"&&!ze(m)&&(E["Content-Type"]="application/x-www-form-urlencoded"),t.config.getCacheBusterParam&&r==="get"&&(z["org.htmx.cache-buster"]=c(k,"id")||"true"),(h==null||h==="")&&(h=e().location.href),I=F(m,"hx-request"),Z=s(m).boosted,w={boosted:Z,parameters:z,unfilteredParameters:G,headers:E,target:k,verb:r,errors:N,withCredentials:g.credentials||I.credentials||t.config.withCredentials,timeout:g.timeout||I.timeout||t.config.timeout,path:h,triggeringEvent:p},!n(m,"htmx:configRequest",w))return f(M),O(),S;if(h=w.path,r=w.verb,E=w.headers,z=w.parameters,N=w.errors,N&&N.length>0)return n(m,"htmx:validation:halted",w),f(M),O(),S;if(K=h.split("#"),oe=K[0],H=K[1],C=null,r==="get"?(C=oe,re=Object.keys(z).length!==0,re&&(C.indexOf("?")<0?C+="?":C+="&",C+=Ne(z),H&&(C+="#"+H)),y.open("GET",C,!0)):y.open(r.toUpperCase(),h,!0),y.overrideMimeType("text/html"),y.withCredentials=w.withCredentials,y.timeout=w.timeout,I.noHeaders);else for(Q in E)E.hasOwnProperty(Q)&&(ue=E[Q],dn(y,Q,ue));return _={xhr:y,target:k,requestConfig:w,etc:g,boosted:Z,pathInfo:{requestPath:h,finalRequestPath:C||h,anchor:H}},y.onload=function(){try{var e,t,s=fn(m);if(_.pathInfo.responsePath=un(y),ce(m,_),B(R),n(m,"htmx:afterRequest",_),n(m,"htmx:afterOnLoad",_),!d(m)){for(e=null;s.length>0&&e==null;)t=s.shift(),d(t)&&(e=t);e&&(n(e,"htmx:afterRequest",_),n(e,"htmx:afterOnLoad",_))}f(M),O()}catch(e){throw i(m,"htmx:onLoadError",l({error:e},_)),e}},y.onerror=function(){B(R),i(m,"htmx:afterRequest",_),i(m,"htmx:sendError",_),f(P),O()},y.onabort=function(){B(R),i(m,"htmx:afterRequest",_),i(m,"htmx:sendAbort",_),f(P),O()},y.ontimeout=function(){B(R),i(m,"htmx:afterRequest",_),i(m,"htmx:timeout",_),f(P),O()},n(m,"htmx:beforeRequest",_)?(R=nt(m),o(["loadstart","loadend","progress","abort"],function(e){o([y,y.upload],function(t){t.addEventListener(e,function(t){n(m,"htmx:xhr:"+e,{lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total})})})}),n(m,"htmx:beforeSend",_),y.send(r==="get"?null:tn(y,m,z)),S):(f(M),O(),S)}function gn(e,t){var n,a,c,l,d,h,m,o=t.xhr,i=null,r=null;return p(o,/HX-Push:/i)?(i=o.getResponseHeader("HX-Push"),r="push"):p(o,/HX-Push-Url:/i)?(i=o.getResponseHeader("HX-Push-Url"),r="push"):p(o,/HX-Replace-Url:/i)&&(i=o.getResponseHeader("HX-Replace-Url"),r="replace"),i?i==="false"?{}:{type:r,path:i}:(c=t.pathInfo.finalRequestPath,l=t.pathInfo.responsePath,d=u(e,"hx-push-url"),h=u(e,"hx-replace-url"),m=s(e).boosted,a=null,n=null,d?(a="push",n=d):h?(a="replace",n=h):m&&(a="push",n=l||c),n?n==="false"?{}:(n==="true"&&(n=l||c),t.pathInfo.anchor&&n.indexOf("#")===-1&&(n=n+"#"+t.pathInfo.anchor),{type:a,path:n}):{})}function vn(s,a){var c,u,m,g,v,b,j,_,O,x,C,k,A,M,r=a.xhr,h=a.target,F=a.etc;if(!n(s,"htmx:beforeOnLoad",a))return;if(p(r,/HX-Trigger:/i)&&Ce(r,"HX-Trigger",s),p(r,/HX-Location:/i)){ie(),g=r.getResponseHeader("HX-Location"),g.indexOf("{")===0&&(c=S(g),g=c.path,delete c.path),Se("GET",g,c).then(function(){Ie(g)});return}if(p(r,/HX-Redirect:/i)){location.href=r.getResponseHeader("HX-Redirect");return}if(p(r,/HX-Refresh:/i)&&"true"===r.getResponseHeader("HX-Refresh")){location.reload();return}if(p(r,/HX-Retarget:/i)&&(a.target=e().querySelector(r.getResponseHeader("HX-Retarget"))),u=gn(s,a),k=r.status>=200&&r.status<400&&r.status!==204,v=r.response,m=r.status>=400,b=l({shouldSwap:k,serverResponse:v,isError:m},a),!n(h,"htmx:beforeSwap",b))return;h=b.target,v=b.serverResponse,m=b.isError,a.target=h,a.failed=m,a.successful=!m,b.shouldSwap&&(r.status===286&&Nt(s),E(s,function(e){v=e.transformResponse(v,r,s)}),u.type&&ie(),_=F.swapOverride,p(r,/HX-Reswap:/i)&&(_=r.getResponseHeader("HX-Reswap")),c=ue(s,_),h.classList.add(t.config.swappingClass),O=null,x=null,j=function(){try{var m,b,j,_,C,g=document.activeElement,l={};try{l={elt:g,start:g?g.selectionStart:null,end:g?g.selectionEnd:null}}catch{}if(m=w(h),ye(c.swapStyle,h,s,v,m),l.elt&&!d(l.elt)&&l.elt.id&&(b=document.getElementById(l.elt.id),C={preventScroll:c.focusScroll!==void 0?!c.focusScroll:!t.config.defaultFocusScroll},b)){if(l.start&&b.setSelectionRange)try{b.setSelectionRange(l.start,l.end)}catch{}b.focus(C)}h.classList.remove(t.config.swappingClass),o(m.elts,function(e){e.classList&&e.classList.add(t.config.settlingClass),n(e,"htmx:afterSwap",a)}),p(r,/HX-Trigger-After-Swap:/i)&&(j=s,d(s)||(j=e().body),Ce(r,"HX-Trigger-After-Swap",j)),_=function(){if(o(m.tasks,function(e){e.call()}),o(m.elts,function(e){e.classList&&e.classList.remove(t.config.settlingClass),n(e,"htmx:afterSettle",a)}),u.type&&(u.type==="push"?(Ie(u.path),n(e().body,"htmx:pushedIntoHistory",{path:u.path})):(Vt(u.path),n(e().body,"htmx:replacedInHistory",{path:u.path}))),a.pathInfo.anchor){var i,l,h=y("#"+a.pathInfo.anchor);h&&h.scrollIntoView({block:"start",behavior:"auto"})}m.title&&(i=y("title"),i?i.innerHTML=m.title:window.document.title=m.title),sn(m.elts,c),p(r,/HX-Trigger-After-Settle:/i)&&(l=s,d(s)||(l=e().body),Ce(r,"HX-Trigger-After-Settle",l)),f(O)},c.settleDelay>0?setTimeout(_,c.settleDelay):_()}catch(e){throw i(s,"htmx:swapError",a),f(x),e}},C=t.config.globalViewTransitions,c.hasOwnProperty("transition")&&(C=c.transition),C&&n(s,"htmx:beforeTransition",a)&&typeof Promise!="undefined"&&document.startViewTransition&&(A=new Promise(function(e,t){O=e,x=t}),M=j,j=function(){document.startViewTransition(function(){return M(),A})}),c.swapDelay>0?setTimeout(j,c.swapDelay):j()),m&&i(s,"htmx:responseError",l({error:"Response Status Error Code "+r.status+" from "+a.pathInfo.requestPath},a))}Z={};function jn(){return{init:function(){return null},onEvent:function(){return!0},transformResponse:function(e){return e},isInlineSwap:function(){return!1},handleSwap:function(){return!1},encodeParameters:function(){return null}}}function yn(e,t){t.init&&t.init(On),Z[e]=l(jn(),t)}function _n(e){delete Z[e]}function J(e,t,n){if(e==null)return t;t==null&&(t=[]),n==null&&(n=[]);var s=a(e,"hx-ext");return s&&o(s.split(","),function(e){if(e=e.replace(/ /g,""),e.slice(0,7)=="ignore:"){n.push(e.slice(7));return}if(n.indexOf(e)<0){var s=Z[e];s&&t.indexOf(s)<0&&t.push(s)}}),J(g(e),t,n)}function Oe(t){e().readyState!=="loading"?t():e().addEventListener("DOMContentLoaded",t)}function xn(){t.config.includeIndicatorStyles!==!1&&e().head.insertAdjacentHTML("beforeend","<style>                      ."+t.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+t.config.requestClass+" ."+t.config.indicatorClass+"{opacity:1}                      ."+t.config.requestClass+"."+t.config.indicatorClass+"{opacity:1}                    </style>")}function Cn(){var t=e().querySelector('meta[name="htmx-config"]');return t?S(t.content):null}function En(){var e=Cn();e&&(t.config=l(t.config,e))}return Oe(function(){En(),xn();var i,a,t=e().body;ae(t),a=e().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']"),t.addEventListener("htmx:abort",function(e){var n=e.target,t=s(n);t&&t.xhr&&t.xhr.abort()}),i=window.onpopstate,window.onpopstate=function(t){t.state&&t.state.htmx?(Ht(),o(a,function(t){n(t,"htmx:restored",{document:e(),triggerEvent:n})})):i&&i(t)},setTimeout(function(){n(t,"htmx:load",{}),t=null},0)}),t}()}),function(e,t){const n=t(e);typeof exports=="object"&&typeof exports.nodeName!="string"?module.exports=n:(e._hyperscript=n,"document"in e&&e._hyperscript.browserInit())}(typeof self!="undefined"?self:this,e=>{"use strict";const u={dynamicResolvers:[function(e,t){if(e==="Fixed")return Number(t).toFixed();if(e.indexOf("Fixed:")===0){let n=e.split(":")[1];return Number(t).toFixed(parseInt(n))}}],String:function(e){return e.toString?e.toString():""+e},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:function(e){return Number(e)},Date:function(e){return new Date(e)},Array:function(e){return Array.from(e)},JSON:function(e){return JSON.stringify(e)},Object:function(e){return e instanceof String&&(e=e.toString()),typeof e=="string"?JSON.parse(e):Object.assign({},e)}},s={attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",hideShowStrategies:{},conversions:u};class t{static OP_TABLE={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"};static isValidCSSClassChar(e){return t.isAlpha(e)||t.isNumeric(e)||e==="-"||e==="_"||e===":"}static isValidCSSIDChar(e){return t.isAlpha(e)||t.isNumeric(e)||e==="-"||e==="_"||e===":"}static isWhitespace(e){return e===" "||e==="	"||t.isNewline(e)}static positionString(e){return"[Line: "+e.line+", Column: "+e.column+"]"}static isNewline(e){return e===``||e===`
`}static isNumeric(e){return e>="0"&&e<="9"}static isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}static isIdentifierChar(e){return e==="_"||e==="$"}static isReservedChar(e){return e==="`"||e==="^"}static isValidSingleQuoteStringStart(e){if(e.length>0){var t=e[e.length-1];if(t.type==="IDENTIFIER"||t.type==="CLASS_REF"||t.type==="ID_REF")return!1;if(t.op&&(t.value===">"||t.value===")"))return!1}return!0}static tokenize(e,n){var a=[],h=e,i=0,f=0,v=1,l="<START>",p=0;function m(){return n&&p===0}for(;i<h.length;)if(s()==="-"&&c()==="-"&&(t.isWhitespace(u(2))||u(2)===""||u(2)==="-")||s()==="/"&&c()==="/"&&(t.isWhitespace(u(2))||u(2)===""||u(2)==="/"))A();else if(s()==="/"&&c()==="*"&&(t.isWhitespace(u(2))||u(2)===""||u(2)==="*"))k();else if(t.isWhitespace(s()))a.push(M());else if(!b()&&s()==="."&&(t.isAlpha(c())||c()==="{"||c()==="-"))a.push(_());else if(!b()&&s()==="#"&&(t.isAlpha(c())||c()==="{"))a.push(O());else if(s()==="["&&c()==="@")a.push(E());else if(s()==="@")a.push(C());else if(s()==="*"&&t.isAlpha(c()))a.push(x());else if(t.isAlpha(s())||!m()&&t.isIdentifierChar(s()))a.push(j());else if(t.isNumeric(s()))a.push(w());else if(!m()&&(s()==='"'||s()==="`"))a.push(g());else if(!m()&&s()==="'")t.isValidSingleQuoteStringStart(a)?a.push(g()):a.push(y());else if(t.OP_TABLE[s()])l==="$"&&s()==="{"&&p++,s()==="}"&&p--,a.push(y());else if(m()||t.isReservedChar(s()))a.push(d("RESERVED",o()));else if(i<h.length)throw Error("Unknown token: "+s()+" ");return new r(a,[],h);function S(e,t){var n=d(e,t);return n.op=!0,n}function d(e,t){return{type:e,value:t||"",start:i,end:i+1,column:f,line:v}}function A(){for(;s()&&!t.isNewline(s());)o();o()}function k(){for(;s()&&(s()!=="*"||c()!=="/");)o();o(),o()}function _(){var n=d("CLASS_REF"),e=o();if(s()==="{"){for(n.template=!0,e+=o();s()&&s()!=="}";)e+=o();if(s()!=="}")throw Error("Unterminated class reference");e+=o()}else for(;t.isValidCSSClassChar(s());)e+=o();return n.value=e,n.end=i,n}function E(){for(var e=d("ATTRIBUTE_REF"),t=o();i<h.length&&s()!=="]";)t+=o();return s()==="]"&&(t+=o()),e.value=t,e.end=i,e}function C(){for(var n=d("ATTRIBUTE_REF"),e=o();t.isValidCSSIDChar(s());)e+=o();if(s()==="=")if(e+=o(),s()==='"'||s()==="'"){let t=g();e+=t.value}else if(t.isAlpha(s())||t.isNumeric(s())||t.isIdentifierChar(s())){let t=j();e+=t.value}return n.value=e,n.end=i,n}function x(){for(var e=d("STYLE_REF"),n=o();t.isAlpha(s())||s()==="-";)n+=o();return e.value=n,e.end=i,e}function O(){var e=d("ID_REF"),n=o();if(s()==="{"){for(e.template=!0,n+=o();s()&&s()!=="}";)n+=o();if(s()!=="}")throw Error("Unterminated id reference");o()}else for(;t.isValidCSSIDChar(s());)n+=o();return e.value=n,e.end=i,e}function j(){for(var n=d("IDENTIFIER"),e=o();t.isAlpha(s())||t.isNumeric(s())||t.isIdentifierChar(s());)e+=o();return s()==="!"&&e==="beep"&&(e+=o()),n.value=e,n.end=i,n}function w(){for(var n=d("NUMBER"),e=o();t.isNumeric(s());)e+=o();for(s()==="."&&t.isNumeric(c())&&(e+=o());t.isNumeric(s());)e+=o();for((s()==="e"||s()==="E")&&(t.isNumeric(c())?e+=o():c()==="-"&&(e+=o(),e+=o()));t.isNumeric(s());)e+=o();return n.value=e,n.end=i,n}function y(){for(var e=S(),n=o();s()&&t.OP_TABLE[n+s()];)n+=o();return e.type=t.OP_TABLE[n],e.value=n,e.end=i,e}function g(){for(var n=d("STRING"),a=o(),e="";s()&&s()!==a;)if(s()==="\\"){o();let t=o();t==="b"?e+="":t==="f"?e+="":t==="n"?e+=`
`:t==="r"?e+=``:t==="t"?e+="	":t==="v"?e+="":e+=t}else e+=o();if(s()!==a)throw Error("Unterminated string at "+t.positionString(n));return o(),n.value=e,n.end=i,n.template=a==="`",n}function s(){return h.charAt(i)}function c(){return h.charAt(i+1)}function u(e=1){return h.charAt(i+e)}function o(){return l=s(),i++,f++,l}function b(){return t.isAlpha(l)||t.isNumeric(l)||l===")"||l==='"'||l==="'"||l==="`"||l==="}"||l==="]"}function M(){for(var e=d("WHITESPACE"),n="";s()&&t.isWhitespace(s());)t.isNewline(s())&&(f=0,v++),n+=o();return e.value=n,e.end=i,e}}tokenize(e,n){return t.tokenize(e,n)}}class r{constructor(e,t,n){this.tokens=e,this.consumed=t,this.source=n,this.consumeWhitespace()}get list(){return this.tokens}_lastConsumed=null;consumeWhitespace(){for(;this.token(0,!0).type==="WHITESPACE";)this.consumed.push(this.tokens.shift())}raiseError(e,t){c.raiseParseError(e,t)}requireOpToken(e){var t=this.matchOpToken(e);if(t)return t;this.raiseError(this,"Expected '"+e+"' but found '"+this.currentToken().value+"'")}matchAnyOpToken(){for(var o,i,s=0;s<arguments.length;s++)if(i=arguments[s],o=this.matchOpToken(i),o)return o}matchAnyToken(){for(var o,i,s=0;s<arguments.length;s++)if(i=arguments[s],o=this.matchToken(i),o)return o}matchOpToken(e){if(this.currentToken()&&this.currentToken().op&&this.currentToken().value===e)return this.consumeToken()}requireTokenType(e,t,n,s){var o=this.matchTokenType(e,t,n,s);if(o)return o;this.raiseError(this,"Expected one of "+JSON.stringify([e,t,n]))}matchTokenType(e,t,n,s){if(this.currentToken()&&this.currentToken().type&&[e,t,n,s].indexOf(this.currentToken().type)>=0)return this.consumeToken()}requireToken(e,t){var n=this.matchToken(e,t);if(n)return n;this.raiseError(this,"Expected '"+e+"' but found '"+this.currentToken().value+"'")}peekToken(e,t,n){return t=t||0,n=n||"IDENTIFIER",this.tokens[t]&&this.tokens[t].value===e&&this.tokens[t].type===n}matchToken(e,t){if(this.follows.indexOf(e)!==-1)return;if(t=t||"IDENTIFIER",this.currentToken()&&this.currentToken().value===e&&this.currentToken().type===t)return this.consumeToken()}consumeToken(){var e=this.tokens.shift();return this.consumed.push(e),this._lastConsumed=e,this.consumeWhitespace(),e}consumeUntil(e,t){for(var o,s=[],n=this.token(0,!0);(t==null||n.type!==t)&&(e==null||n.value!==e)&&n.type!=="EOF";)o=this.tokens.shift(),this.consumed.push(o),s.push(n),n=this.token(0,!0);return this.consumeWhitespace(),s}lastWhitespace(){return this.consumed[this.consumed.length-1]&&this.consumed[this.consumed.length-1].type==="WHITESPACE"?this.consumed[this.consumed.length-1].value:""}consumeUntilWhitespace(){return this.consumeUntil(null,"WHITESPACE")}hasMore(){return this.tokens.length>0}token(e,t){var s,n=0;do{if(!t)for(;this.tokens[n]&&this.tokens[n].type==="WHITESPACE";)n++;s=this.tokens[n],e--,n++}while(e>-1)return s||{type:"EOF",value:"<<<EOF>>>"}}currentToken(){return this.token(0)}lastMatch(){return this._lastConsumed}static sourceFor=function(){return this.programSource.substring(this.startToken.start,this.endToken.end)};static lineFor=function(){return this.programSource.split(`
`)[this.startToken.line-1]};follows=[];pushFollow(e){this.follows.push(e)}popFollow(){this.follows.pop()}clearFollows(){var e=this.follows;return this.follows=[],e}restoreFollows(e){this.follows=e}}class c{constructor(e){this.runtime=e,this.possessivesDisabled=!1,this.addGrammarElement("feature",function(e,t,n){if(n.matchOpToken("(")){var s,o=e.requireElement("feature",n);return n.requireOpToken(")"),o}if(s=e.FEATURES[n.currentToken().value||""],s)return s(e,t,n)}),this.addGrammarElement("command",function(e,t,n){if(n.matchOpToken("(")){const t=e.requireElement("command",n);return n.requireOpToken(")"),t}var o=e.COMMANDS[n.currentToken().value||""];let s;return o?s=o(e,t,n):n.currentToken().type==="IDENTIFIER"&&(s=e.parseElement("pseudoCommand",n)),s&&e.parseElement("indirectStatement",n,s)}),this.addGrammarElement("commandList",function(e,t,n){if(n.hasMore()){var s=e.parseElement("command",n);if(s){n.matchToken("then");const t=e.parseElement("commandList",n);return t&&(s.next=t),s}}return{type:"emptyCommandListCommand",op:function(e){return t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}}),this.addGrammarElement("leaf",function(e,t,n){var s=e.parseAnyOf(e.LEAF_EXPRESSIONS,n);return s??e.parseElement("symbol",n)}),this.addGrammarElement("indirectExpression",function(e,t,n,s){for(var i,a,o=0;o<e.INDIRECT_EXPRESSIONS.length;o++)if(a=e.INDIRECT_EXPRESSIONS[o],s.endToken=n.lastMatch(),i=e.parseElement(a,n,s),i)return i;return s}),this.addGrammarElement("indirectStatement",function(e,t,n,s){if(n.matchToken("unless")){s.endToken=n.lastMatch();var i=e.requireElement("expression",n),o={type:"unlessStatementModifier",args:[i],op:function(e,t){return t?this.next:s},execute:function(e){return t.unifiedExec(this,e)}};return s.parent=o,o}return s}),this.addGrammarElement("primaryExpression",function(e,t,n){var s=e.parseElement("leaf",n);if(s)return e.parseElement("indirectExpression",n,s);e.raiseParseError(n,"Unexpected value: "+n.currentToken().value)})}use(e){return e(this),this}GRAMMAR={};COMMANDS={};FEATURES={};LEAF_EXPRESSIONS=[];INDIRECT_EXPRESSIONS=[];initElt(e,t,n){e.startToken=t,e.sourceFor=r.sourceFor,e.lineFor=r.lineFor,e.programSource=n.source}parseElement(e,t,n=void 0){var n,s,o,i=this.GRAMMAR[e];if(i){if(o=t.currentToken(),s=i(this,this.runtime,t,n),s)for(this.initElt(s,o,t),s.endToken=s.endToken||t.lastMatch(),n=s.root;n!=null;)this.initElt(n,o,t),n=n.root;return s}}requireElement(e,t,n,s){var o=this.parseElement(e,t,s);return o||c.raiseParseError(t,n||"Expected "+e),o}parseAnyOf(e,t){for(var s,o,n=0;n<e.length;n++)if(o=e[n],s=this.parseElement(o,t),s)return s}addGrammarElement(e,t){this.GRAMMAR[e]=t}addCommand(e,t){var n=e+"Command",s=function(e,s,o){const i=t(e,s,o);if(i)return i.type=n,i.execute=function(e){return e.meta.command=i,s.unifiedExec(this,e)},i};this.GRAMMAR[n]=s,this.COMMANDS[e]=s}addFeature(e,t){var n=e+"Feature",s=function(s,o,i){var a=t(s,o,i);if(a)return a.isFeature=!0,a.keyword=e,a.type=n,a};this.GRAMMAR[n]=s,this.FEATURES[e]=s}addLeafExpression(e,t){this.LEAF_EXPRESSIONS.push(e),this.addGrammarElement(e,t)}addIndirectExpression(e,t){this.INDIRECT_EXPRESSIONS.push(e),this.addGrammarElement(e,t)}static createParserContext(e){var t=e.currentToken(),o=e.source,n=o.split(`
`),i=t&&t.line?t.line-1:n.length-1,s=n[i],a=t&&t.line?t.column:s.length-1;return s+`
`+" ".repeat(a)+`^^

`}static raiseParseError(e,t){t=(t||"Unexpected Token : "+e.currentToken().value)+`

`+c.createParserContext(e);var n=new Error(t);throw n.tokens=e,n}raiseParseError(e,t){c.raiseParseError(e,t)}parseHyperScript(e){var t=this.parseElement("hyperscript",e);if(e.hasMore()&&this.raiseParseError(e),t)return t}setParent(e,t){typeof e=="object"&&(e.parent=t,typeof t=="object"&&(t.children=t.children||new Set,t.children.add(e)),this.setParent(e.next,t))}commandStart(e){return this.COMMANDS[e.value||""]}featureStart(e){return this.FEATURES[e.value||""]}commandBoundary(e){return!!(e.value=="end"||e.value=="then"||e.value=="else"||e.value=="otherwise"||e.value==")"||this.commandStart(e)||this.featureStart(e)||e.type=="EOF")}parseStringTemplate(e){var n,s,t=[""];do t.push(e.lastWhitespace()),e.currentToken().value==="$"?(e.consumeToken(),s=e.matchOpToken("{"),t.push(this.requireElement("expression",e)),s&&e.requireOpToken("}"),t.push("")):e.currentToken().value==="\\"?(e.consumeToken(),e.consumeToken()):(n=e.consumeToken(),t[t.length-1]+=n?n.value:"");while(e.hasMore())return t.push(e.lastWhitespace()),t}ensureTerminated(e){const n=this.runtime;for(var s={type:"implicitReturn",op:function(e){return e.meta.returned=!0,e.meta.resolve&&e.meta.resolve(),n.HALT},execute:function(){}},t=e;t.next;)t=t.next;t.next=s}}class o{constructor(e,n){this.lexer=e??new t,this.parser=n??new c(this).use(b).use(v),this.parser.runtime=this}matchesSelector(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}makeEvent(t,n){var s;return e.Event&&typeof e.Event=="function"?(s=new Event(t,{bubbles:!0,cancelable:!0}),s.detail=n):(s=document.createEvent("CustomEvent"),s.initCustomEvent(t,!0,!0,n)),s}triggerEvent(e,t,n,s){n=n||{},n.sender=s;var o=this.makeEvent(t,n),i=e.dispatchEvent(o);return i}isArrayLike(e){return Array.isArray(e)||typeof NodeList!="undefined"&&(e instanceof NodeList||e instanceof HTMLCollection)}isIterable(e){return typeof e=="object"&&Symbol.iterator in e&&typeof e[Symbol.iterator]=="function"}shouldAutoIterate(e){return e!=null&&e[h]||this.isArrayLike(e)}forEach(e,t){if(e==null);else if(this.isIterable(e))for(const n of e)t(n);else if(this.isArrayLike(e))for(var n=0;n<e.length;n++)t(e[n]);else t(e)}implicitLoop(e,t){if(this.shouldAutoIterate(e))for(const n of e)t(n);else t(e)}wrapArrays(e){for(var t,n=[],s=0;s<e.length;s++)t=e[s],Array.isArray(t)?n.push(Promise.all(t)):n.push(t);return n}unwrapAsyncs(e){for(var t,n,o,s=0;s<e.length;s++)if(t=e[s],t.asyncWrapper&&(e[s]=t.value),Array.isArray(t))for(n=0;n<t.length;n++)o=t[n],o.asyncWrapper&&(t[n]=o.value)}static HALT={};HALT=o.HALT;unifiedExec(e,t){for(;!0;){try{var n=this.unifiedEval(e,t)}catch(s){if(t.meta.handlingFinally)console.error(" Exception in finally block: ",s),n=o.HALT;else{if(this.registerHyperTrace(t,s),t.meta.errorHandler&&!t.meta.handlingError){t.meta.handlingError=!0,t.locals[t.meta.errorSymbol]=s,e=t.meta.errorHandler;continue}t.meta.currentException=s,n=o.HALT}}if(n==null){console.error(e," did not return a next element to execute! context: ",t);return}if(n.then){n.then(e=>{this.unifiedExec(e,t)}).catch(e=>{this.unifiedExec({op:function(){throw e}},t)});return}if(n===o.HALT)if(t.meta.finallyHandler&&!t.meta.handlingFinally)t.meta.handlingFinally=!0,e=t.meta.finallyHandler;else if(t.meta.onHalt&&t.meta.onHalt(),t.meta.currentException){if(t.meta.reject){t.meta.reject(t.meta.currentException);return}throw t.meta.currentException}else return;else e=n}}unifiedEval(e,t){var n,o,a,r,l,d,s=[t],c=!1,i=!1;if(e.args)for(a=0;a<e.args.length;a++)if(o=e.args[a],o==null)s.push(null);else if(Array.isArray(o)){l=[];for(r=0;r<o.length;r++)d=o[r],n=d?d.evaluate(t):null,n&&(n.then?c=!0:n.asyncWrapper&&(i=!0)),l.push(n);s.push(l)}else o.evaluate?(n=o.evaluate(t),n&&(n.then?c=!0:n.asyncWrapper&&(i=!0)),s.push(n)):s.push(o);return c?new Promise((t,n)=>{s=this.wrapArrays(s),Promise.all(s).then(function(s){i&&this.unwrapAsyncs(s);try{var o=e.op.apply(e,s);t(o)}catch(e){n(e)}}).catch(function(e){n(e)})}):(i&&this.unwrapAsyncs(s),e.op.apply(e,s))}_scriptAttrs=null;getScriptAttributes(){return this._scriptAttrs==null&&(this._scriptAttrs=s.attributes.replace(/ /g,"").split(",")),this._scriptAttrs}getScript(e){for(var n,t=0;t<this.getScriptAttributes().length;t++)if(n=this.getScriptAttributes()[t],e.hasAttribute&&e.hasAttribute(n))return e.getAttribute(n);return e instanceof HTMLScriptElement&&e.type==="text/hyperscript"?e.innerText:null}hyperscriptFeaturesMap=new WeakMap;getHyperscriptFeatures(e){var t=this.hyperscriptFeaturesMap.get(e);return typeof t=="undefined"&&e&&this.hyperscriptFeaturesMap.set(e,t={}),t}addFeatures(e,t){e&&(Object.assign(t.locals,this.getHyperscriptFeatures(e)),this.addFeatures(e.parentElement,t))}makeContext(e,t,n,s){return new g(e,t,n,s,this)}getScriptSelector(){return this.getScriptAttributes().map(function(e){return"["+e+"]"}).join(", ")}convertValue(e,t){for(var s,o,a,i=u.dynamicResolvers,n=0;n<i.length;n++)if(a=i[n],s=a(t,e),s!==void 0)return s;if(e==null)return null;if(o=u[t],o)return o(e);throw"Unknown conversion : "+t}parse(e){const a=this.lexer,n=this.parser;var s,o,i,t=a.tokenize(e);return this.parser.commandStart(t.currentToken())?(s=n.requireElement("commandList",t),t.hasMore()&&n.raiseParseError(t),n.ensureTerminated(s),s):n.featureStart(t.currentToken())?(o=n.requireElement("hyperscript",t),t.hasMore()&&n.raiseParseError(t),o):(i=n.requireElement("expression",t),t.hasMore()&&n.raiseParseError(t),i)}evaluateNoPromise(e,t){let n=e.evaluate(t);if(n.next)throw new Error(r.sourceFor.call(e)+" returned a Promise in a context that they are not allowed.");return n}evaluate(t,n,s){class a extends EventTarget{constructor(e){super(),this.module=e}toString(){return this.module.id}}var o,i="document"in e?e.document.body:new a(s&&s.module);return n=Object.assign(this.makeContext(i,null,i,null),n||{}),o=this.parse(t),o.execute?(o.execute(n),n.result):o.apply?(o.apply(i,i,s),this.getHyperscriptFeatures(i)):o.evaluate(n);function r(){return{}}}processNode(e){var t=this.getScriptSelector();this.matchesSelector(e,t)&&this.initElement(e,e),e instanceof HTMLScriptElement&&e.type==="text/hyperscript"&&this.initElement(e,document.body),e.querySelectorAll&&this.forEach(e.querySelectorAll(t+", [type='text/hyperscript']"),e=>{this.initElement(e,e instanceof HTMLScriptElement&&e.type==="text/hyperscript"?document.body:e)})}initElement(e,t){if(e.closest&&e.closest(s.disableSelector))return;var n,i,a,o=this.getInternalData(e);if(!o.initialized&&(n=this.getScript(e),n))try{o.initialized=!0,o.script=n;const s=this.lexer,r=this.parser;if(a=s.tokenize(n),i=r.parseHyperScript(a),!i)return;i.apply(t||e,e),setTimeout(()=>{this.triggerEvent(t||e,"load",{hyperscript:!0})},1)}catch(t){this.triggerEvent(e,"exception",{error:t}),console.error("hyperscript errors were found on the following element:",e,`

`,t.message,t.stack)}}internalDataMap=new WeakMap;getInternalData(e){var t=this.internalDataMap.get(e);return typeof t=="undefined"&&this.internalDataMap.set(e,t={}),t}typeCheck(e,t,n){if(e==null&&n)return!0;var s=Object.prototype.toString.call(e).slice(8,-1);return s===t}getElementScope(e){var t,s,o,n=e.meta&&e.meta.owner;return n?(s=this.getInternalData(n),t="elementScope",e.meta.feature&&e.meta.feature.behavior&&(t=e.meta.feature.behavior+"Scope"),o=f(s,t),o):{}}isReservedWord(e){return["meta","it","result","locals","event","target","detail","sender","body"].includes(e)}isHyperscriptContext(e){return e instanceof g}resolveSymbol(t,n,s){if(t==="me"||t==="my"||t==="I")return n.me;if(t==="it"||t==="its"||t==="result")return n.result;if(t==="you"||t==="your"||t==="yourself")return n.you;if(s==="global")return e[t];if(s==="element"){var o,i,a=this.getElementScope(n);return a[t]}if(s==="local")return n.locals[t];if(n.meta&&n.meta.context){if(i=n.meta.context[t],typeof i!="undefined")return i;if(n.meta.context.detail&&(i=n.meta.context.detail[t],typeof i!="undefined"))return i}return this.isHyperscriptContext(n)&&!this.isReservedWord(t)?(o=n.locals[t]):(o=n[t]),typeof o!="undefined"?o:(a=this.getElementScope(n),o=a[t],typeof o!="undefined"?o:e[t])}setSymbol(t,n,s,o){if(s==="global")e[t]=o;else if(s==="element"){var a,i=this.getElementScope(n);i[t]=o}else s==="local"?n.locals[t]=o:this.isHyperscriptContext(n)&&!this.isReservedWord(t)&&typeof n.locals[t]!="undefined"?n.locals[t]=o:(i=this.getElementScope(n),a=i[t],typeof a!="undefined"?i[t]=o:this.isHyperscriptContext(n)&&!this.isReservedWord(t)?n.locals[t]=o:n[t]=o)}findNext(e,t){if(e)return e.resolveNext?e.resolveNext(t):e.next?e.next:this.findNext(e.parent,t)}flatGet(e,t,n){if(e!=null){var s,i,a,o=n(e,t);if(typeof o!="undefined")return o;if(this.shouldAutoIterate(e)){s=[];for(a of e)i=n(a,t),s.push(i);return s}}}resolveProperty(e,t){return this.flatGet(e,t,(e,t)=>e[t])}resolveAttribute(e,t){return this.flatGet(e,t,(e,t)=>e.getAttribute&&e.getAttribute(t))}resolveStyle(e,t){return this.flatGet(e,t,(e,t)=>e.style&&e.style[t])}resolveComputedStyle(e,t){return this.flatGet(e,t,(e,t)=>getComputedStyle(e).getPropertyValue(t))}assignToNamespace(t,n,s,o){let i;for(typeof document!="undefined"&&t===document.body?i=e:i=this.getHyperscriptFeatures(t);(r=n.shift())!==void 0;){var r,a=i[r];a==null&&(a={},i[r]=a),i=a}i[s]=o}getHyperTrace(e,t){for(var s=[],n=e;n.meta.caller;)n=n.meta.caller;if(n.meta.traceMap)return n.meta.traceMap.get(t,s)}registerHyperTrace(e,t){for(var o,n=[],s=null;e!=null;)n.push(e),s=e,e=e.meta.caller;s.meta.traceMap==null&&(s.meta.traceMap=new Map),s.meta.traceMap.get(t)||(o={trace:n,print:function(e){e=e||console.error,e("hypertrace /// ");for(var o,s=0,t=0;t<n.length;t++)s=Math.max(s,n[t].meta.feature.displayName.length);for(t=0;t<n.length;t++)o=n[t],e("  ->",o.meta.feature.displayName.padEnd(s+2),"-",o.meta.owner)}},s.meta.traceMap.set(t,o))}escapeSelector(e){return e.replace(/:/g,function(e){return"\\"+e})}nullCheck(e,t){if(e==null)throw new Error("'"+t.sourceFor()+"' is null")}isEmpty(e){return e==null||e.length===0}doesExist(e){if(e==null)return!1;if(this.shouldAutoIterate(e)){for(const t of e)return!0;return!1}return!0}getRootNode(e){if(e&&e instanceof Node){var t=e.getRootNode();if(t instanceof Document||t instanceof ShadowRoot)return t}return document}getEventQueueFor(e,t){let o=this.getInternalData(e);var s,n=o.eventQueues;return n==null&&(n=new Map,o.eventQueues=n),s=n.get(t),s==null&&(s={queue:[],executing:!1},n.set(t,s)),s}beepValueToConsole(e,t,n){if(this.triggerEvent(e,"hyperscript:beep",{element:e,expression:t,value:n})){n?n instanceof a?s="ElementCollection":n.constructor?s=n.constructor.name:s="unknown":s="object (null)";var s,o=n;s==="String"?o='"'+o+'"':n instanceof a&&(o=Array.from(n)),console.log("///_ BEEP! The expression ("+r.sourceFor.call(t).replace("beep! ","")+") evaluates to:",o,"of type "+s)}}hyperscriptUrl="document"in e&&document.currentScript?document.currentScript.src:null}function l(){let e=document.cookie.split("; ").map(e=>{let t=e.split("=");return{name:t[0],value:decodeURIComponent(t[1])}});return e}function p(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}function w(){for(const e of l())p(e.name)}const y=new Proxy({},{get(e,t){if(t==="then"||t==="asyncWrapper")return null;if(t==="length")return l().length;if(t==="clear")return p;if(t==="clearAll")return w;if(typeof t=="string"){{if(!isNaN(t))return l()[parseInt(t)];let e=document.cookie.split("; ").find(e=>e.startsWith(t+"="))?.split("=")[1];if(e)return decodeURIComponent(e)}}else if(t===Symbol.iterator)return l()[t]},set(e,t,n){var s=null;return"string"==typeof n?(s=encodeURIComponent(n),s+=";samesite=lax"):(s=encodeURIComponent(n.value),n.expires&&(s+=";expires="+n.maxAge),n.maxAge&&(s+=";max-age="+n.maxAge),n.partitioned&&(s+=";partitioned="+n.partitioned),n.path&&(s+=";path="+n.path),n.samesite&&(s+=";samesite="+n.path),n.secure&&(s+=";secure="+n.path)),document.cookie=t+"="+n,!0}});class g{constructor(t,n,s,o,i){this.meta={parser:i.parser,lexer:i.lexer,runtime:i,owner:t,feature:n,iterators:{},ctx:this},this.locals={cookies:y},this.me=s,this.you=void 0,this.result=void 0,this.event=o,this.target=o?o.target:null,this.detail=o?o.detail:null,this.sender=o?o.detail?o.detail.sender:null:null,this.body="document"in e?document.body:null,i.addFeatures(t,this)}}class a{constructor(e,t,n){this._css=e,this.relativeToElement=t,this.escape=n,this[h]=!0}get css(){return this.escape?o.prototype.escapeSelector(this._css):this._css}get className(){return this._css.substr(1)}get id(){return this.className()}contains(e){for(let t of this)if(t.contains(e))return!0;return!1}get length(){return this.selectMatches().length}[Symbol.iterator](){let e=this.selectMatches();return e[Symbol.iterator]()}selectMatches(){let e=o.prototype.getRootNode(this.relativeToElement).querySelectorAll(this.css);return e}}const h=Symbol();function f(e,t){var n,s=e[t];return s||(n={},e[t]=n,n)}function C(e){try{return JSON.parse(e)}catch(e){return j(e),null}}function j(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function m(e,t){return new(e.bind.apply(e,[e].concat(t)))}function b(n){n.addLeafExpression("parenthesized",function(e,t,n){if(n.matchOpToken("(")){var s,o=n.clearFollows();try{s=e.requireElement("expression",n)}finally{n.restoreFollows(o)}return n.requireOpToken(")"),s}}),n.addLeafExpression("string",function(e,n,s){var i,a,r,o=s.matchTokenType("STRING");if(!o)return;return a=o.value,o.template?(r=t.tokenize(a,!0),i=e.parseStringTemplate(r)):i=[],{type:"string",token:o,args:i,op:function(){for(var n,s="",t=1;t<arguments.length;t++)n=arguments[t],n!==void 0&&(s+=n);return s},evaluate:function(e){return i.length===0?a:n.unifiedEval(this,e)}}}),n.addGrammarElement("nakedString",function(e,t,n){if(n.hasMore()){var s=n.consumeUntilWhitespace();return n.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:s,evaluate:function(){return s.map(function(e){return e.value}).join("")}}}}),n.addLeafExpression("number",function(e,t,n){var o,i,s=n.matchTokenType("NUMBER");if(!s)return;return i=s,o=parseFloat(s.value),{type:"number",value:o,numberToken:i,evaluate:function(){return o}}}),n.addLeafExpression("idRef",function(e,n,s){var i,a,r,o=s.matchTokenType("ID_REF");if(!o)return;if(!o.value)return;if(o.template)return i=o.value.substring(2),a=t.tokenize(i),r=e.requireElement("expression",a),{type:"idRefTemplate",args:[r],op:function(e,t){return n.getRootNode(e.me).getElementById(t)},evaluate:function(e){return n.unifiedEval(this,e)}};const c=o.value.substring(1);return{type:"idRef",css:o.value,value:c,evaluate:function(e){return n.getRootNode(e.me).getElementById(c)}}}),n.addLeafExpression("classRef",function(e,n,s){var i,r,c,o=s.matchTokenType("CLASS_REF");if(!o)return;if(!o.value)return;if(o.template)return i=o.value.substring(2),r=t.tokenize(i),c=e.requireElement("expression",r),{type:"classRefTemplate",args:[c],op:function(e,t){return new a("."+t,e.me,!0)},evaluate:function(e){return n.unifiedEval(this,e)}};const l=o.value;return{type:"classRef",css:l,evaluate:function(e){return new a(l,e.me,!0)}}});class _ extends a{constructor(e,t,n){super(e,t),this.templateParts=n,this.elements=n.filter(e=>e instanceof Element)}get css(){let e="",t=0;for(const n of this.templateParts)n instanceof Element?e+="[data-hs-query-id='"+t+++"']":e+=n;return e}[Symbol.iterator](){this.elements.forEach((e,t)=>e.dataset.hsQueryId=t);const e=super[Symbol.iterator]();return this.elements.forEach(e=>e.removeAttribute("data-hs-query-id")),e}}n.addLeafExpression("queryRef",function(e,n,s){var o,i,r,c,l,d=s.matchOpToken("<");if(!d)return;return i=s.consumeUntil("/"),s.requireOpToken("/"),s.requireOpToken(">"),o=i.map(function(e){return e.type==="STRING"?'"'+e.value+'"':e.value}).join(""),o.indexOf("$")>=0&&(r=!0,c=t.tokenize(o,!0),l=e.parseStringTemplate(c)),{type:"queryRef",css:o,args:l,op:function(e,...t){return r?new _(o,e.me,t):new a(o,e.me)},evaluate:function(e){return n.unifiedEval(this,e)}}}),n.addLeafExpression("attributeRef",function(e,t,n){var s,o,i,r,c,l,a=n.matchTokenType("ATTRIBUTE_REF");if(!a)return;if(!a.value)return;return o=a.value,o.indexOf("[")===0?(i=o.substring(2,o.length-1)):(i=o.substring(1)),l="["+i+"]",r=i.split("="),c=r[0],s=r[1],s&&s.indexOf('"')===0&&(s=s.substring(1,s.length-1)),{type:"attributeRef",name:c,css:l,value:s,op:function(e){var t=e.you||e.me;if(t)return t.getAttribute(c)},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addLeafExpression("styleRef",function(e,t,n){var s,o=n.matchTokenType("STYLE_REF");if(!o)return;if(!o.value)return;return s=o.value.substr(1),s.startsWith("computed-")?(s=s.substr("computed-".length),{type:"computedStyleRef",name:s,op:function(e){var n=e.you||e.me;if(n)return t.resolveComputedStyle(n,s)},evaluate:function(e){return t.unifiedEval(this,e)}}):{type:"styleRef",name:s,op:function(e){var n=e.you||e.me;if(n)return t.resolveStyle(n,s)},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("objectKey",function(e,t,n){if(s=n.matchTokenType("STRING"))return{type:"objectKey",key:s.value,evaluate:function(){return s.value}};if(n.matchOpToken("[")){var s,o,i=e.parseElement("expression",n);return n.requireOpToken("]"),{type:"objectKey",expr:i,args:[i],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}o="";do s=n.matchTokenType("IDENTIFIER")||n.matchOpToken("-"),s&&(o+=s.value);while(s)return{type:"objectKey",key:o,evaluate:function(){return o}}}),n.addLeafExpression("objectLiteral",function(e,t,n){if(!n.matchOpToken("{"))return;var i,a,s=[],o=[];if(!n.matchOpToken("}")){do i=e.requireElement("objectKey",n),n.requireOpToken(":"),a=e.requireElement("expression",n),o.push(a),s.push(i);while(n.matchOpToken(","))n.requireOpToken("}")}return{type:"objectLiteral",args:[s,o],op:function(e,t,n){for(var o={},s=0;s<t.length;s++)o[t[s]]=n[s];return o},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("nakedNamedArgumentList",function(e,t,n){var o,a,s=[],i=[];if(n.currentToken().type==="IDENTIFIER")do a=n.requireTokenType("IDENTIFIER"),n.requireOpToken(":"),o=e.requireElement("expression",n),i.push(o),s.push({name:a,value:o});while(n.matchOpToken(","))return{type:"namedArgumentList",fields:s,args:[i],op:function(e,t){for(var i,o={_namedArgList_:!0},n=0;n<t.length;n++)i=s[n],o[i.name.value]=t[n];return o},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("namedArgumentList",function(e,t,n){if(!n.matchOpToken("("))return;var s=e.requireElement("nakedNamedArgumentList",n);return n.requireOpToken(")"),s}),n.addGrammarElement("symbol",function(e,t,n){var o,s="default";n.matchToken("global")?s="global":n.matchToken("element")||n.matchToken("module")?(s="element",n.matchOpToken("'")&&n.requireToken("s")):n.matchToken("local")&&(s="local");let a=n.matchOpToken(":"),i=n.matchTokenType("IDENTIFIER");if(i&&i.value)return o=i.value,a&&(o=":"+o),s==="default"&&(o.indexOf("$")===0&&(s="global"),o.indexOf(":")===0&&(s="element")),{type:"symbol",token:i,scope:s,name:o,evaluate:function(e){return t.resolveSymbol(o,e,s)}}}),n.addGrammarElement("implicitMeTarget",function(){return{type:"implicitMeTarget",evaluate:function(e){return e.you||e.me}}}),n.addLeafExpression("boolean",function(e,t,n){var s=n.matchToken("true")||n.matchToken("false");if(!s)return;const o=s.value==="true";return{type:"boolean",evaluate:function(){return o}}}),n.addLeafExpression("null",function(e,t,n){if(n.matchToken("null"))return{type:"null",evaluate:function(){return null}}}),n.addLeafExpression("arrayLiteral",function(e,t,n){if(!n.matchOpToken("["))return;var o,s=[];if(!n.matchOpToken("]")){do o=e.requireElement("expression",n),s.push(o);while(n.matchOpToken(","))n.requireOpToken("]")}return{type:"arrayLiteral",values:s,args:[s],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addLeafExpression("blockLiteral",function(e,t,n){if(!n.matchOpToken("\\"))return;var o,s=[],i=n.matchTokenType("IDENTIFIER");if(i)for(s.push(i);n.matchOpToken(",");)s.push(n.requireTokenType("IDENTIFIER"));return n.requireOpToken("-"),n.requireOpToken(">"),o=e.requireElement("expression",n),{type:"blockLiteral",args:s,expr:o,evaluate:function(e){var t=function(){for(var t=0;t<s.length;t++)e.locals[s[t].value]=arguments[t];return o.evaluate(e)};return t}}}),n.addIndirectExpression("propertyAccess",function(e,t,n,s){if(!n.matchOpToken("."))return;var o=n.requireTokenType("IDENTIFIER"),i={type:"propertyAccess",root:s,prop:o,args:[s],op:function(e,n){var s=t.resolveProperty(n,o.value);return s},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",n,i)}),n.addIndirectExpression("of",function(e,t,n,s){if(!n.matchToken("of"))return;for(var i,a,c,l,u,d=e.requireElement("unaryExpression",n),r=null,o=s;o.root;)r=o,o=o.root;return o.type!=="symbol"&&o.type!=="attributeRef"&&o.type!=="styleRef"&&o.type!=="computedStyleRef"&&e.raiseParseError(n,"Cannot take a property of a non-symbol: "+o.type),c=o.type==="attributeRef",l=o.type==="styleRef"||o.type==="computedStyleRef",(c||l)&&(u=o),i=o.name,a={type:"ofExpression",prop:o.token,root:d,attribute:u,expression:s,args:[d],op:function(e,n){return c?t.resolveAttribute(n,i):l?o.type==="computedStyleRef"?t.resolveComputedStyle(n,i):t.resolveStyle(n,i):t.resolveProperty(n,i)},evaluate:function(e){return t.unifiedEval(this,e)}},o.type==="attributeRef"&&(a.attribute=o),r?(r.root=a,r.args=[a]):s=a,e.parseElement("indirectExpression",n,s)}),n.addIndirectExpression("possessive",function(e,t,n,s){if(e.possessivesDisabled)return;var o,i,a,c,r=n.matchOpToken("'");if(r||s.type==="symbol"&&(s.name==="my"||s.name==="its"||s.name==="your")&&(n.currentToken().type==="IDENTIFIER"||n.currentToken().type==="ATTRIBUTE_REF"||n.currentToken().type==="STYLE_REF"))return r&&n.requireToken("s"),i=e.parseElement("attributeRef",n),i==null&&(o=e.parseElement("styleRef",n),o==null&&(a=n.requireTokenType("IDENTIFIER"))),c={type:"possessive",root:s,attribute:i||o,prop:a,args:[s],op:function(e,n){if(i)var s=t.resolveAttribute(n,i.name);else o?o.type==="computedStyleRef"?s=t.resolveComputedStyle(n,o.name):s=t.resolveStyle(n,o.name):(s=t.resolveProperty(n,a.value));return s},evaluate:function(e){return t.unifiedEval(this,e)}},e.parseElement("indirectExpression",n,c)}),n.addIndirectExpression("inExpression",function(e,t,n,s){if(!n.matchToken("in"))return;var o=e.requireElement("unaryExpression",n),i={type:"inExpression",root:s,args:[s,o],op:function(e,n,s){var i,o=[];if(n.css)t.implicitLoop(s,function(e){for(var s=e.querySelectorAll(n.css),t=0;t<s.length;t++)o.push(s[t])});else if(n instanceof Element){if(i=!1,t.implicitLoop(s,function(e){e.contains(n)&&(i=!0)}),i)return n}else t.implicitLoop(n,function(e){t.implicitLoop(s,function(t){e===t&&o.push(e)})});return o},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",n,i)}),n.addIndirectExpression("asExpression",function(e,t,n,s){if(!n.matchToken("as"))return;n.matchToken("a")||n.matchToken("an");var o=e.requireElement("dotOrColonPath",n).evaluate(),i={type:"asExpression",root:s,args:[s],op:function(e,n){return t.convertValue(n,o)},evaluate:function(e){return t.unifiedEval(this,e)}};return e.parseElement("indirectExpression",n,i)}),n.addIndirectExpression("functionCall",function(e,t,n,s){if(!n.matchOpToken("("))return;var i,o=[];if(!n.matchOpToken(")")){do o.push(e.requireElement("expression",n));while(n.matchOpToken(","))n.requireOpToken(")")}return s.root?(i={type:"functionCall",root:s,argExressions:o,args:[s.root,o],op:function(e,n,o){t.nullCheck(n,s.root);var i=n[s.prop.value];return t.nullCheck(i,s),i.hyperfunc&&o.push(e),i.apply(n,o)},evaluate:function(e){return t.unifiedEval(this,e)}}):(i={type:"functionCall",root:s,argExressions:o,args:[s,o],op:function(e,n,o){t.nullCheck(n,s),n.hyperfunc&&o.push(e);var i=n.apply(null,o);return i},evaluate:function(e){return t.unifiedEval(this,e)}}),e.parseElement("indirectExpression",n,i)}),n.addIndirectExpression("attributeRefAccess",function(e,t,n,s){var i,o=e.parseElement("attributeRef",n);if(!o)return;return i={type:"attributeRefAccess",root:s,attribute:o,args:[s],op:function(e,n){var s=t.resolveAttribute(n,o.name);return s},evaluate:function(e){return t.unifiedEval(this,e)}},i}),n.addIndirectExpression("arrayIndex",function(e,t,n,s){if(!n.matchOpToken("["))return;var c,l,a=!1,r=!1,o=null,i=null;return n.matchOpToken("..")?(a=!0,o=e.requireElement("expression",n)):(o=e.requireElement("expression",n),n.matchOpToken("..")&&(r=!0,c=n.currentToken(),c.type!=="R_BRACKET"&&(i=e.parseElement("expression",n)))),n.requireOpToken("]"),l={type:"arrayIndex",root:s,prop:o,firstIndex:o,secondIndex:i,args:[s,o,i],op:function(e,t,n,s){return t==null?null:a?(n<0&&(n=t.length+n),t.slice(0,n+1)):r?s!=null?(s<0&&(s=t.length+s),t.slice(n,s+1)):t.slice(n):t[n]},evaluate:function(e){return t.unifiedEval(this,e)}},e.parseElement("indirectExpression",n,l)});var i,c,l,d,u,h,v,b,j,w=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","pc","pt","px"];n.addGrammarElement("postfixExpression",function(e,t,n){var s,i,r,o=e.parseElement("primaryExpression",n);let a=n.matchAnyToken.apply(n,w)||n.matchOpToken("%");if(a)return{type:"stringPostfix",postfix:a.value,args:[o],op:function(e,t){return""+t+a.value},evaluate:function(e){return t.unifiedEval(this,e)}};if(s=null,n.matchToken("s")||n.matchToken("seconds")?s=1e3:(n.matchToken("ms")||n.matchToken("milliseconds"))&&(s=1),s)return{type:"timeExpression",time:o,factor:s,args:[o],op:function(e,t){return t*s},evaluate:function(e){return t.unifiedEval(this,e)}};if(n.matchOpToken(":")){if(i=n.requireTokenType("IDENTIFIER"),!i.value)return;return r=!n.matchOpToken("!"),{type:"typeCheck",typeName:i,nullOk:r,args:[o],op:function(e,n){var s=t.typeCheck(n,this.typeName.value,r);if(s)return n;throw new Error("Typecheck failed!  Expected: "+i.value)},evaluate:function(e){return t.unifiedEval(this,e)}}}return o}),n.addGrammarElement("logicalNot",function(e,t,n){if(!n.matchToken("not"))return;var s=e.requireElement("unaryExpression",n);return{type:"logicalNot",root:s,args:[s],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("noExpression",function(e,t,n){if(!n.matchToken("no"))return;var s=e.requireElement("unaryExpression",n);return{type:"noExpression",root:s,args:[s],op:function(e,n){return t.isEmpty(n)},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addLeafExpression("some",function(e,t,n){if(!n.matchToken("some"))return;var s=e.requireElement("expression",n);return{type:"noExpression",root:s,args:[s],op:function(e,n){return!t.isEmpty(n)},evaluate(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("negativeNumber",function(e,t,n){if(!n.matchOpToken("-"))return;var s=e.requireElement("unaryExpression",n);return{type:"negativeNumber",root:s,args:[s],op:function(e,t){return-1*t},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("unaryExpression",function(e,t,n){return n.matchToken("the"),e.parseAnyOf(["beepExpression","logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],n)}),n.addGrammarElement("beepExpression",function(e,t,n){if(!n.matchToken("beep!"))return;var o,s=e.parseElement("unaryExpression",n);if(s)return s.booped=!0,o=s.evaluate,s.evaluate=function(e){let n=o.apply(s,arguments),i=e.me;return t.beepValueToConsole(i,s,n),n},s}),v=function(e,t,n,s){for(var a,o=t.querySelectorAll(n),i=0;i<o.length;i++)if(a=o[i],a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return a;if(s)return o[0]},b=function(e,t,n,s){for(var a,o=t.querySelectorAll(n),i=o.length-1;i>=0;i--)if(a=o[i],a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return a;if(s)return o[o.length-1]},l=function(e,t,n,s){var a,r,c,i=[];o.prototype.forEach(t,function(t){(t.matches(n)||t===e)&&i.push(t)});for(a=0;a<i.length-1;a++)if(c=i[a],c===e)return i[a+1];if(s&&(r=i[0],r&&r.matches(n)))return r},j=function(e,t,n,s){return l(e,Array.from(t).reverse(),n,s)},n.addGrammarElement("relativePositionalExpression",function(e,t,n){var s,o,i,a,c,u,h,d=n.matchAnyToken("next","previous");if(!d)return;if(o=d.value==="next",u=e.parseElement("expression",n),n.matchToken("from")){n.pushFollow("in");try{i=e.requireElement("unaryExpression",n)}finally{n.popFollow()}}else i=e.requireElement("implicitMeTarget",n);return a=!1,n.matchToken("in")?(a=!0,h=e.requireElement("unaryExpression",n)):n.matchToken("within")?c=e.requireElement("unaryExpression",n):c=document.body,s=!1,n.matchToken("with")&&(n.requireToken("wrapping"),s=!0),{type:"relativePositionalExpression",from:i,forwardSearch:o,inSearch:a,wrapping:s,inElt:h,withinElt:c,operator:d.value,args:[u,i,h,c],op:function(e,t,n,i,c){var d=t.css;if(d==null)throw"Expected a CSS value to be returned by "+r.sourceFor.apply(u);if(a){if(i)return o?l(n,i,d,s):j(n,i,d,s)}else if(c)return o?v(n,c,d,s):b(n,c,d,s)},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("positionalExpression",function(e,t,n){var o,s=n.matchAnyToken("first","last","random");if(!s)return;n.matchAnyToken("in","from","of"),o=e.requireElement("unaryExpression",n);const i=s.value;return{type:"positionalExpression",rhs:o,operator:s.value,args:[o],op:function(e,t){if(t&&!Array.isArray(t)&&(t.children?t=t.children:t=Array.from(t)),t){if(i==="first")return t[0];if(i==="last")return t[t.length-1];if(i==="random")return t[Math.floor(Math.random()*t.length)]}},evaluate:function(e){return t.unifiedEval(this,e)}}}),n.addGrammarElement("mathOperator",function(e,t,n){for(var s,r,o=e.parseElement("unaryExpression",n),a=null,i=n.matchAnyOpToken("+","-","*","/")||n.matchToken("mod");i;)a=a||i,s=i.value,a.value!==s&&e.raiseParseError(n,"You must parenthesize math operations with different operators"),r=e.parseElement("unaryExpression",n),o={type:"mathOperator",lhs:o,rhs:r,operator:s,args:[o,r],op:function(e,t,n){if(s==="+")return t+n;if(s==="-")return t-n;if(s==="*")return t*n;if(s==="/")return t/n;if(s==="mod")return t%n},evaluate:function(e){return t.unifiedEval(this,e)}},i=n.matchAnyOpToken("+","-","*","/")||n.matchToken("mod");return o}),n.addGrammarElement("mathExpression",function(e,t,n){return e.parseAnyOf(["mathOperator","unaryExpression"],n)});function s(e,t,n){if(t.contains)return t.contains(n);if(t.includes)return t.includes(n);throw Error("The value of "+e.sourceFor()+" does not have a contains or includes method on it")}function p(e,t,n){if(t.match)return!!t.match(n);if(t.matches)return t.matches(n);throw Error("The value of "+e.sourceFor()+" does not have a match or matches method on it")}n.addGrammarElement("comparisonOperator",function(e,t,n){var i,a,l,d,r=e.parseElement("mathExpression",n),h=n.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),o=h?h.value:null,c=!0,u=!1;return o==null&&(n.matchToken("is")||n.matchToken("am")?n.matchToken("not")?n.matchToken("in")?o="not in":n.matchToken("a")?(o="not a",u=!0):n.matchToken("empty")?(o="not empty",c=!1):(n.matchToken("really")?o="!==":o="!=",n.matchToken("equal")&&n.matchToken("to")):n.matchToken("in")?o="in":n.matchToken("a")?(o="a",u=!0):n.matchToken("empty")?(o="empty",c=!1):n.matchToken("less")?(n.requireToken("than"),n.matchToken("or")?(n.requireToken("equal"),n.requireToken("to"),o="<="):o="<"):n.matchToken("greater")?(n.requireToken("than"),n.matchToken("or")?(n.requireToken("equal"),n.requireToken("to"),o=">="):o=">"):(n.matchToken("really")?o="===":o="==",n.matchToken("equal")&&n.matchToken("to")):n.matchToken("equals")?o="==":n.matchToken("really")?(n.requireToken("equals"),o="==="):n.matchToken("exist")||n.matchToken("exists")?(o="exist",c=!1):n.matchToken("matches")||n.matchToken("match")?o="match":n.matchToken("contains")||n.matchToken("contain")?o="contain":n.matchToken("includes")||n.matchToken("include")?o="include":(n.matchToken("do")||n.matchToken("does"))&&(n.requireToken("not"),n.matchToken("matches")||n.matchToken("match")?o="not match":n.matchToken("contains")||n.matchToken("contain")?o="not contain":n.matchToken("exist")||n.matchToken("exist")?(o="not exist",c=!1):n.matchToken("include")?o="not include":e.raiseParseError(n,"Expected matches or contains"))),o&&(u?(l=n.requireTokenType("IDENTIFIER"),d=!n.matchOpToken("!")):c&&(i=e.requireElement("mathExpression",n),(o==="match"||o==="not match")&&(i=i.css?i.css:i)),a=r,r={type:"comparisonOperator",operator:o,typeName:l,nullOk:d,lhs:r,rhs:i,args:[r,i],op:function(e,n,r){if(o==="==")return n==r;if(o==="!=")return n!=r;if(o==="===")return n===r;if(o==="!==")return n!==r;if(o==="match")return n!=null&&p(a,n,r);if(o==="not match")return n==null||!p(a,n,r);if(o==="in")return r!=null&&s(i,r,n);if(o==="not in")return r==null||!s(i,r,n);if(o==="contain")return n!=null&&s(a,n,r);if(o==="not contain")return n==null||!s(a,n,r);if(o==="include")return n!=null&&s(a,n,r);if(o==="not include")return n==null||!s(a,n,r);if(o==="===")return n===r;if(o==="!==")return n!==r;if(o==="<")return n<r;if(o===">")return n>r;if(o==="<=")return n<=r;if(o===">=")return n>=r;if(o==="empty")return t.isEmpty(n);if(o==="not empty")return!t.isEmpty(n);if(o==="exist")return t.doesExist(n);if(o==="not exist")return!t.doesExist(n);if(o==="a")return t.typeCheck(n,l.value,d);if(o==="not a")return!t.typeCheck(n,l.value,d);throw"Unknown comparison : "+o},evaluate:function(e){return t.unifiedEval(this,e)}}),r}),n.addGrammarElement("comparisonExpression",function(e,t,n){return e.parseAnyOf(["comparisonOperator","mathExpression"],n)}),n.addGrammarElement("logicalOperator",function(e,t,n){for(var a,s=e.parseElement("comparisonExpression",n),i=null,o=n.matchToken("and")||n.matchToken("or");o;){i=i||o,i.value!==o.value&&e.raiseParseError(n,"You must parenthesize logical operations with different operators"),a=e.requireElement("comparisonExpression",n);const r=o.value;s={type:"logicalOperator",operator:r,lhs:s,rhs:a,args:[s,a],op:function(e,t,n){return r==="and"?t&&n:t||n},evaluate:function(e){return t.unifiedEval(this,e)}},o=n.matchToken("and")||n.matchToken("or")}return s}),n.addGrammarElement("logicalExpression",function(e,t,n){return e.parseAnyOf(["logicalOperator","mathExpression"],n)}),n.addGrammarElement("asyncExpression",function(e,t,n){if(n.matchToken("async")){var s=e.requireElement("logicalExpression",n),o={type:"asyncExpression",value:s,evaluate:function(e){return{asyncWrapper:!0,value:this.value.evaluate(e)}}};return o}return e.parseElement("logicalExpression",n)}),n.addGrammarElement("expression",function(e,t,n){return n.matchToken("the"),e.parseElement("asyncExpression",n)}),n.addGrammarElement("assignableExpression",function(e,t,n){n.matchToken("the");var s=e.parseElement("primaryExpression",n);return s&&(s.type==="symbol"||s.type==="ofExpression"||s.type==="propertyAccess"||s.type==="attributeRefAccess"||s.type==="attributeRef"||s.type==="styleRef"||s.type==="arrayIndex"||s.type==="possessive")?s:(e.raiseParseError(n,"A target expression must be writable.  The expression type '"+(s&&s.type)+"' is not."),s)}),n.addGrammarElement("hyperscript",function(e,t,n){var o,s=[];if(n.hasMore())for(;e.featureStart(n.currentToken())||n.currentToken().value==="(";)o=e.requireElement("feature",n),s.push(o),n.matchToken("end");return{type:"hyperscript",features:s,apply:function(e,t,n){for(const o of s)o.install(e,t,n)}}}),d=function(e){var t=[];if(e.token(0).value==="("&&(e.token(1).value===")"||e.token(2).value===","||e.token(2).value===")")){e.matchOpToken("(");do t.push(e.requireTokenType("IDENTIFIER"));while(e.matchOpToken(","))e.requireOpToken(")")}return t},n.addFeature("on",function(e,t,n){if(!n.matchToken("on"))return;var s,o,i,a,r,c,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,l=!1;n.matchToken("every")&&(l=!0),j=[],i=null;do{if(M=e.requireElement("eventName",n,"Expected event name"),a=M.evaluate(),i?i=i+" or "+a:i="on "+a,A=d(n),w=null,n.matchOpToken("[")&&(w=e.requireElement("expression",n),n.requireOpToken("]")),n.currentToken().type==="NUMBER"){if(v=n.consumeToken(),!v.value)return;if(C=parseInt(v.value),n.matchToken("to")){if(g=n.consumeToken(),!g.value)return;F=parseInt(g.value)}else n.matchToken("and")&&(T=!0,n.requireToken("on"))}if(a==="intersection"){if(r={},n.matchToken("with")&&(r.with=e.requireElement("expression",n).evaluate()),n.matchToken("having"))do n.matchToken("margin")?r.rootMargin=e.requireElement("stringLike",n).evaluate():n.matchToken("threshold")?r.threshold=e.requireElement("expression",n).evaluate():e.raiseParseError(n,"Unknown intersection config specification");while(n.matchToken("and"))}else if(a==="mutation")if(s={},n.matchToken("of"))do n.matchToken("anything")?(s.attributes=!0,s.subtree=!0,s.characterData=!0,s.childList=!0):n.matchToken("childList")?s.childList=!0:n.matchToken("attributes")?(s.attributes=!0,s.attributeOldValue=!0):n.matchToken("subtree")?s.subtree=!0:n.matchToken("characterData")?(s.characterData=!0,s.characterDataOldValue=!0):n.currentToken().type==="ATTRIBUTE_REF"?(b=n.consumeToken(),s.attributeFilter==null&&(s.attributeFilter=[]),b.value.indexOf("@")==0?s.attributeFilter.push(b.value.substring(1)):e.raiseParseError(n,"Only shorthand attribute references are allowed here")):e.raiseParseError(n,"Unknown mutation config specification");while(n.matchToken("or"))else s.attributes=!0,s.characterData=!0,s.childList=!0;if(h=null,u=!1,n.matchToken("from"))if(n.matchToken("elsewhere"))u=!0;else{n.pushFollow("or");try{h=e.requireElement("expression",n)}finally{n.popFollow()}h||e.raiseParseError(n,'Expected either target value or "elsewhere".')}h===null&&u===!1&&n.matchToken("elsewhere")&&(u=!0),n.matchToken("in")&&(S=e.parseElement("unaryExpression",n)),n.matchToken("debounced")?(n.requireToken("at"),f=e.requireElement("unaryExpression",n),x=f.evaluate({})):n.matchToken("throttled")&&(n.requireToken("at"),f=e.requireElement("unaryExpression",n),O=f.evaluate({})),j.push({execCount:0,every:l,on:a,args:A,filter:w,from:h,inExpr:S,elsewhere:u,startCount:C,endCount:F,unbounded:T,debounceTime:x,throttleTime:O,mutationSpec:s,intersectionSpec:r,debounced:void 0,lastExec:void 0})}while(n.matchToken("or"))return p=!0,l||n.matchToken("queue")&&(n.matchToken("all")?(z=!0,p=!1):n.matchToken("first")?(E=!0):n.matchToken("none")?(k=!0):n.requireToken("last")),c=e.requireElement("commandList",n),e.ensureTerminated(c),n.matchToken("catch")&&(_=n.requireTokenType("IDENTIFIER").value,m=e.requireElement("commandList",n),e.ensureTerminated(m)),n.matchToken("finally")&&(y=e.requireElement("commandList",n),e.ensureTerminated(y)),o={displayName:i,events:j,start:c,every:l,execCount:0,errorHandler:m,errorSymbol:_,execute:function(e){let n=t.getEventQueueFor(e.me,o);if(n.executing&&l===!1){if(k||E&&n.queue.length>0)return;p&&(n.queue.length=0),n.queue.push(e);return}o.execCount++,n.executing=!0,e.meta.onHalt=function(){n.executing=!1;var e=n.queue.shift();e&&setTimeout(function(){o.execute(e)},1)},e.meta.reject=function(n){console.error(n.message?n.message:n);var s=t.getHyperTrace(e,n);s&&s.print(),t.triggerEvent(e.me,"exception",{error:n})},c.execute(e)},install:function(e){for(const n of o.events){var s;n.elsewhere?s=[document]:n.from?s=n.from.evaluate(t.makeContext(e,o,e,null)):s=[e],t.implicitLoop(s,function(s){var r,a=n.on;if(s==null){console.warn("'%s' feature ignored because target does not exists:",i,e);return}if(n.mutationSpec){a="hyperscript:mutation";const e=new MutationObserver(function(e,n){o.executing||t.triggerEvent(s,a,{mutationList:e,observer:n})});e.observe(s,n.mutationSpec)}if(n.intersectionSpec){a="hyperscript:intersection";const e=new IntersectionObserver(function(n){for(const i of n){var o={observer:e},o=Object.assign(o,i);o.intersecting=i.isIntersecting,t.triggerEvent(s,a,o)}},n.intersectionSpec);e.observe(s)}r=s.addEventListener||s.on,r.call(s,a,function i(r){if(typeof Node!="undefined"&&e instanceof Node&&s!==e&&!e.isConnected){s.removeEventListener(a,i);return}var l,d,u,c=t.makeContext(e,o,e,r);if(n.elsewhere&&e.contains(r.target))return;n.from&&(c.result=s);for(const e of n.args){let t=c.event[e.value];t!==void 0?c.locals[e.value]=t:"detail"in c.event&&(c.locals[e.value]=c.event.detail[e.value])}if(c.meta.errorHandler=m,c.meta.errorSymbol=_,c.meta.finallyHandler=y,n.filter){d=c.meta.context,c.meta.context=c.event;try{if(u=n.filter.evaluate(c),u);else return}finally{c.meta.context=d}}if(n.inExpr)for(l=r.target;!0;){if(l.matches&&l.matches(n.inExpr.css)){c.result=l;break}if(l=l.parentElement,l==null)return}if(n.execCount++,n.startCount)if(n.endCount){if(n.execCount<n.startCount||n.execCount>n.endCount)return}else if(n.unbounded){if(n.execCount<n.startCount)return}else if(n.execCount!==n.startCount)return;if(n.debounceTime){n.debounced&&clearTimeout(n.debounced),n.debounced=setTimeout(function(){o.execute(c)},n.debounceTime);return}if(n.throttleTime){if(n.lastExec&&Date.now()<n.lastExec+n.throttleTime)return;n.lastExec=Date.now()}o.execute(c)})})}}},e.setParent(c,o),o}),n.addFeature("def",function(e,t,n){if(!n.matchToken("def"))return;var o,i,a,r,l,h=e.requireElement("dotOrColonPath",n),d=h.evaluate(),u=d.split("."),c=u.pop(),s=[];if(n.matchOpToken("("))if(n.matchOpToken(")"));else{do s.push(n.requireTokenType("IDENTIFIER"));while(n.matchOpToken(","))n.requireOpToken(")")}return o=e.requireElement("commandList",n),n.matchToken("catch")&&(l=n.requireTokenType("IDENTIFIER").value,i=e.parseElement("commandList",n)),n.matchToken("finally")&&(a=e.requireElement("commandList",n),e.ensureTerminated(a)),r={displayName:c+"("+s.map(function(e){return e.value}).join(", ")+")",name:c,args:s,start:o,errorHandler:i,errorSymbol:l,finallyHandler:a,install:function(e,n){var h=function(){var d,u,h,m,f,p,c=t.makeContext(n,r,e,null);c.meta.errorHandler=i,c.meta.errorSymbol=l,c.meta.finallyHandler=a;for(d=0;d<s.length;d++)u=s[d],m=arguments[d],u&&(c.locals[u.value]=m);return c.meta.caller=arguments[s.length],c.meta.caller&&(c.meta.callingCommand=c.meta.caller.meta.command),h=null,p=new Promise(function(e,t){f=e,h=t}),o.execute(c),c.meta.returned?c.meta.returnValue:(c.meta.resolve=f,c.meta.reject=h,p)};h.hyperfunc=!0,h.hypername=d,t.assignToNamespace(e,u,c,h)}},e.ensureTerminated(o),i&&e.ensureTerminated(i),e.setParent(o,r),r}),n.addFeature("set",function(e,t,n){let s=e.parseElement("setCommand",n);if(s){s.target.scope!=="element"&&e.raiseParseError(n,"variables declared at the feature level must be element scoped.");let o={start:s,install:function(e){s&&s.execute(t.makeContext(e,o,e,null))}};return e.ensureTerminated(s),o}}),n.addFeature("init",function(e,t,n){if(!n.matchToken("init"))return;var i=n.matchToken("immediately"),s=e.requireElement("commandList",n),o={start:s,install:function(e){let a=function(){s&&s.execute(t.makeContext(e,o,e,null))};i?a():setTimeout(a,0)}};return e.ensureTerminated(s),e.setParent(s,o),o}),n.addFeature("worker",function(e,t,n){if(n.matchToken("worker"))return e.raiseParseError(n,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info."),void 0}),n.addFeature("behavior",function(t,n,s){if(!s.matchToken("behavior"))return;var i,a,l,r=t.requireElement("dotOrColonPath",s).evaluate(),c=r.split("."),d=c.pop(),o=[];if(s.matchOpToken("(")&&!s.matchOpToken(")")){do o.push(s.requireTokenType("IDENTIFIER").value);while(s.matchOpToken(","))s.requireOpToken(")")}i=t.requireElement("hyperscript",s);for(a=0;a<i.features.length;a++)l=i.features[a],l.behavior=r;return{install:function(){n.assignToNamespace(e.document&&e.document.body,c,d,function(e,t,s){for(var c=n.getInternalData(e),l=f(c,r+"Scope"),a=0;a<o.length;a++)l[o[a]]=s[o[a]];i.apply(e,t)})}}}),n.addFeature("install",function(t,n,s){if(!s.matchToken("install"))return;var a,o=t.requireElement("dotOrColonPath",s).evaluate(),i=o.split("."),r=t.parseElement("namedArgumentList",s);return a={install:function(t,s){n.unifiedEval({args:[r],op:function(n,a){for(var r=e,c=0;c<i.length;c++)if(r=r[i[c]],typeof r!="object"&&typeof r!="function")throw new Error("No such behavior defined as "+o);if(!(r instanceof Function))throw new Error(o+" is not a behavior");r(t,s,a)}},n.makeContext(t,a,t,null))}}}),n.addGrammarElement("jsBody",function(e,t,n){for(var a,c,l=n.currentToken().start,s=n.currentToken(),r=[],o="",i=!1;n.hasMore();){if(s=n.consumeToken(),a=n.token(0,!0),a.type==="IDENTIFIER"&&a.value==="end")break;i?s.type==="IDENTIFIER"||s.type==="NUMBER"?o+=s.value:(o!==""&&r.push(o),o="",i=!1):s.type==="IDENTIFIER"&&s.value==="function"&&(i=!0)}return c=s.end+1,{type:"jsBody",exposedFunctionNames:r,jsSource:n.source.substring(l,c)}}),n.addFeature("js",function(t,n,s){if(!s.matchToken("js"))return;var o=t.requireElement("jsBody",s),i=o.jsSource+`
return { `+o.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ",a=new Function(i);return{jsSource:i,function:a,exposedFunctionNames:o.exposedFunctionNames,install:function(){Object.assign(e,a())}}}),n.addCommand("js",function(t,n,s){if(!s.matchToken("js"))return;var i,a,r,c,o=[];if(s.matchOpToken("("))if(s.matchOpToken(")"));else{do r=s.requireTokenType("IDENTIFIER"),o.push(r.value);while(s.matchOpToken(","))s.requireOpToken(")")}return i=t.requireElement("jsBody",s),s.matchToken("end"),a=m(Function,o.concat([i.jsSource])),c={jsSource:i.jsSource,function:a,inputs:o,op:function(t){var s,i=[];return o.forEach(function(e){i.push(n.resolveSymbol(e,t,"default"))}),s=a.apply(e,i),s&&typeof s.then=="function"?new Promise(function(e){s.then(function(s){t.result=s,e(n.findNext(this,t))})}):(t.result=s,n.findNext(this,t))}},c}),n.addCommand("async",function(e,t,n){if(!n.matchToken("async"))return;if(n.matchToken("do")){for(var i,s=e.requireElement("commandList",n),o=s;o.next;)o=o.next;o.next=t.HALT,n.requireToken("end")}else s=e.requireElement("command",n);return i={body:s,op:function(e){return setTimeout(function(){s.execute(e)}),t.findNext(this,e)}},e.setParent(s,i),i}),n.addCommand("tell",function(e,t,n){var s,o,i,a,r=n.currentToken();if(!n.matchToken("tell"))return;return o=e.requireElement("expression",n),s=e.requireElement("commandList",n),n.hasMore()&&!e.featureStart(n.currentToken())&&n.requireToken("end"),i="tell_"+r.start,a={value:o,body:s,args:[o],resolveNext:function(e){var n=e.meta.iterators[i];return n.index<n.value.length?(e.you=n.value[n.index++],s):(e.you=n.originalYou,this.next?this.next:t.findNext(this.parent,e))},op:function(e,t){return t==null?t=[]:Array.isArray(t)||t instanceof NodeList||(t=[t]),e.meta.iterators[i]={originalYou:e.you,index:0,value:t},this.resolveNext(e)}},e.setParent(s,a),a}),n.addCommand("wait",function(e,t,n){if(!n.matchToken("wait"))return;if(n.matchToken("for")){n.matchToken("a");var s,i,a,r,o=[];do a=n.token(0),a.type==="NUMBER"||a.type==="L_PAREN"?o.push({time:e.requireElement("expression",n).evaluate()}):o.push({name:e.requireElement("dotOrColonPath",n,"Expected event name").evaluate(),args:d(n)});while(n.matchToken("or"))return n.matchToken("from")&&(r=e.requireElement("expression",n)),s={event:o,on:r,args:[r],op:function(e,n){var s=n||e.me;if(!(s instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise(n=>{var i,a=!1;for(const r of o)i=s=>{if(e.result=s,r.args)for(const t of r.args)e.locals[t.value]=s[t.value]||(s.detail?s.detail[t.value]:null);a||(a=!0,n(t.findNext(this,e)))},r.name?s.addEventListener(r.name,i,{once:!0}):r.time!=null&&setTimeout(i,r.time,r.time)})}},s}return n.matchToken("a")?(n.requireToken("tick"),i=0):i=e.requireElement("expression",n),s={type:"waitCmd",time:i,args:[i],op:function(e,n){return new Promise(s=>{setTimeout(()=>{s(t.findNext(this,e))},n)})},execute:function(e){return t.unifiedExec(this,e)}},s}),n.addGrammarElement("dotOrColonPath",function(e,t,n){var s,o,i=n.matchTokenType("IDENTIFIER");if(i){if(o=[i.value],s=n.matchOpToken(".")||n.matchOpToken(":"),s)do o.push(n.requireTokenType("IDENTIFIER","NUMBER").value);while(n.matchOpToken(s.value))return{type:"dotOrColonPath",path:o,evaluate:function(){return o.join(s?s.value:"")}}}}),n.addGrammarElement("eventName",function(e,t,n){var s;return(s=n.matchTokenType("STRING"))?{evaluate:function(){return s.value}}:e.parseElement("dotOrColonPath",n)});function g(e,t,n,s){var o,i,a=t.requireElement("eventName",s),r=t.parseElement("namedArgumentList",s);return e==="send"&&s.matchToken("to")||e==="trigger"&&s.matchToken("on")?(o=t.requireElement("expression",s)):(o=t.requireElement("implicitMeTarget",s)),i={eventName:a,details:r,to:o,args:[o,a,r],op:function(e,t,s,a){return n.nullCheck(t,o),n.implicitLoop(t,function(t){n.triggerEvent(t,s,a,e.me)}),n.findNext(i,e)}},i}n.addCommand("trigger",function(e,t,n){if(n.matchToken("trigger"))return g("trigger",e,t,n)}),n.addCommand("send",function(e,t,n){if(n.matchToken("send"))return g("send",e,t,n)}),c=function(e,t,n,s){if(s)if(e.commandBoundary(n.currentToken()))e.raiseParseError(n,"'return' commands must return a value.  If you do not wish to return a value, use 'exit' instead.");else var i,o=e.requireElement("expression",n);return i={value:o,args:[o],op:function(e,n){var s=e.meta.resolve;return e.meta.returned=!0,e.meta.returnValue=n,s&&(n?s(n):s()),t.HALT}},i},n.addCommand("return",function(e,t,n){if(n.matchToken("return"))return c(e,t,n,!0)}),n.addCommand("exit",function(e,t,n){if(n.matchToken("exit"))return c(e,t,n,!1)}),n.addCommand("halt",function(e,t,n){if(n.matchToken("halt")){if(n.matchToken("the")){n.requireToken("event"),n.matchOpToken("'")&&n.requireToken("s");var s,o,i,a,r=!0}return n.matchToken("bubbling")?(s=!0):n.matchToken("default")&&(o=!0),i=c(e,t,n,!1),a={keepExecuting:!0,bubbling:s,haltDefault:o,exit:i,op:function(e){if(e.event)return s?e.event.stopPropagation():o?e.event.preventDefault():(e.event.stopPropagation(),e.event.preventDefault()),r?t.findNext(this,e):i}},a}}),n.addCommand("log",function(e,t,n){if(!n.matchToken("log"))return;for(var o,i,s=[e.parseElement("expression",n)];n.matchOpToken(",");)s.push(e.requireElement("expression",n));return n.matchToken("with")&&(o=e.requireElement("expression",n)),i={exprs:s,withExpr:o,args:[o,s],op:function(e,n,s){return n?n.apply(null,s):console.log.apply(null,s),t.findNext(this,e)}},i}),n.addCommand("beep!",function(e,t,n){if(!n.matchToken("beep!"))return;for(var o,s=[e.parseElement("expression",n)];n.matchOpToken(",");)s.push(e.requireElement("expression",n));return o={exprs:s,args:[s],op:function(e,n){for(let o=0;o<s.length;o++){const i=s[o],a=n[o];t.beepValueToConsole(e.me,i,a)}return t.findNext(this,e)}},o}),n.addCommand("throw",function(e,t,n){if(!n.matchToken("throw"))return;var s=e.requireElement("expression",n),o={expr:s,args:[s],op:function(e,n){throw t.registerHyperTrace(e,n),n}};return o}),h=function(e,t,n){var s=e.requireElement("expression",n),o={expr:s,args:[s],op:function(e,n){return e.result=n,t.findNext(o,e)}};return o},n.addCommand("call",function(e,t,n){if(!n.matchToken("call"))return;var s=h(e,t,n);return s.expr&&s.expr.type!=="functionCall"&&e.raiseParseError(n,"Must be a function invocation"),s}),n.addCommand("get",function(e,t,n){if(n.matchToken("get"))return h(e,t,n)}),n.addCommand("make",function(e,t,n){if(!n.matchToken("make"))return;n.matchToken("a")||n.matchToken("an");var s,i,o=e.requireElement("expression",n),a=[];if(o.type!=="queryRef"&&n.matchToken("from"))do a.push(e.requireElement("expression",n));while(n.matchOpToken(","))return n.matchToken("called")&&(s=e.requireElement("symbol",n)),o.type==="queryRef"?(i={op:function(e){for(var n,i,a,r,d,l="div",c=[],u=/(?:(^|#|\.)([^#. ]+))/g;n=u.exec(o.css);)n[1]===""?l=n[2].trim():n[1]==="#"?r=n[2].trim():c.push(n[2].trim());i=document.createElement(l),r!==void 0&&(i.id=r);for(a=0;a<c.length;a++)d=c[a],i.classList.add(d);return e.result=i,s&&t.setSymbol(s.name,e,s.scope,i),t.findNext(this,e)}},i):(i={args:[o,a],op:function(e,n,o){return e.result=m(n,o),s&&t.setSymbol(s.name,e,s.scope,e.result),t.findNext(this,e)}},i)}),n.addGrammarElement("pseudoCommand",function(e,t,n){let r=n.token(1);if(!(r&&r.op&&(r.value==="."||r.value==="(")))return null;for(var o,a,i=e.requireElement("primaryExpression",n),c=i.root,s=i;c.root!=null;)s=s.root,c=c.root;return i.type!=="functionCall"&&e.raiseParseError(n,"Pseudo-commands must be function calls"),s.type==="functionCall"&&s.root.root==null&&(n.matchAnyToken("the","to","on","with","into","from","at")?(o=e.requireElement("expression",n)):n.matchToken("me")&&(o=e.requireElement("implicitMeTarget",n))),o?a={type:"pseudoCommand",root:o,argExressions:s.argExressions,args:[o,s.argExressions],op:function(e,n,i){t.nullCheck(n,o);var r=n[s.root.name];return t.nullCheck(r,s),r.hyperfunc&&i.push(e),e.result=r.apply(n,i),t.findNext(a,e)},execute:function(e){return t.unifiedExec(this,e)}}:a={type:"pseudoCommand",expr:i,args:[i],op:function(e,n){return e.result=n,t.findNext(a,e)},execute:function(e){return t.unifiedExec(this,e)}},a}),i=function(e,t,n,s,o){var i,a,c,h,r=s.type==="symbol",l=s.type==="attributeRef",d=s.type==="styleRef",u=s.type==="arrayIndex";return!(l||d||r)&&s.root==null&&e.raiseParseError(n,"Can only put directly into symbols, not references"),a=null,c=null,r||(l||d?(a=e.requireElement("implicitMeTarget",n),i=s):u?(c=s.firstIndex,a=s.root):(c=s.prop?s.prop.value:null,i=s.attribute,a=s.root)),h={target:s,symbolWrite:r,value:o,args:[a,c,o],op:function(e,n,o,c){return r?t.setSymbol(s.name,e,s.scope,c):(t.nullCheck(n,a),u?n[o]=c:t.implicitLoop(n,function(e){i?i.type==="attributeRef"?c==null?e.removeAttribute(i.name):e.setAttribute(i.name,c):e.style[i.name]=c:e[o]=c})),t.findNext(this,e)}},h},n.addCommand("default",function(e,t,n){if(!n.matchToken("default"))return;var s,a,r,o=e.requireElement("assignableExpression",n);return n.requireToken("to"),a=e.requireElement("expression",n),s=i(e,t,n,o,a),r={target:o,value:a,setter:s,args:[o],op:function(e,n){return n?t.findNext(this,e):s}},s.parent=r,r}),n.addCommand("set",function(e,t,n){if(!n.matchToken("set"))return;if(n.currentToken().type==="L_BRACE"){var s,a,r,o=e.requireElement("objectLiteral",n);return n.requireToken("on"),s=e.requireElement("expression",n),a={objectLiteral:o,target:s,args:[o,s],op:function(e,n,s){return Object.assign(s,n),t.findNext(this,e)}},a}try{n.pushFollow("to"),s=e.requireElement("assignableExpression",n)}finally{n.popFollow()}return n.requireToken("to"),r=e.requireElement("expression",n),i(e,t,n,s,r)}),n.addCommand("if",function(e,t,n){if(!n.matchToken("if"))return;var s,o,i,a,r=e.requireElement("expression",n);return n.matchToken("then"),o=e.parseElement("commandList",n),a=!1,(n.matchToken("else")||n.matchToken("otherwise"))&&(a=n.peekToken("if"),s=e.parseElement("commandList",n)),n.hasMore()&&!a&&n.requireToken("end"),i={expr:r,trueBranch:o,falseBranch:s,args:[r],op:function(e,n){return n?o:s||t.findNext(this,e)}},e.setParent(o,i),e.setParent(s,i),i}),u=function(e,t,n,s){var o,i,a,r,c,l,d,u,h,m,f,p,g,v,b,j,y=t.currentToken();if(t.matchToken("for")||s?(h=t.requireTokenType("IDENTIFIER"),o=h.value,t.requireToken("in"),u=e.requireElement("expression",t)):t.matchToken("in")?(o="it",u=e.requireElement("expression",t)):t.matchToken("while")?(l=e.requireElement("expression",t)):t.matchToken("until")?(b=!0,t.matchToken("event")?(a=e.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(f=e.requireElement("expression",t))):(l=e.requireElement("expression",t))):!e.commandBoundary(t.currentToken())&&t.currentToken().value!=="forever"?(p=e.requireElement("expression",t),t.requireToken("times")):(t.matchToken("forever"),j=!0),t.matchToken("index")&&(h=t.requireTokenType("IDENTIFIER"),d=h.value),r=e.parseElement("commandList",t),r&&a){for(c=r;c.next;)c=c.next;g={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(n.findNext(g))},0)})}},c.next=g}return t.hasMore()&&t.requireToken("end"),o==null?(o="_implicit_repeat_"+y.start,i=o):(i=o+"_"+y.start),m={identifier:o,indexIdentifier:d,slot:i,expression:u,forever:j,times:p,until:b,event:a,on:f,whileExpr:l,resolveNext:function(){return this},loop:r,args:[l,p],op:function(e,t,s){var h,u=e.meta.iterators[i],c=!1,m=null;return this.forever?c=!0:this.until?a?c=e.meta.iterators[i].eventFired===!1:c=t!==!0:l?c=t:s?c=u.index<s:(h=u.iterator.next(),c=!h.done,m=h.value),c?(u.value?e.result=e.locals[o]=m:e.result=u.index,d&&(e.locals[d]=u.index),u.index++,r):(e.meta.iterators[i]=null,n.findNext(this.parent,e))}},e.setParent(r,m),v={name:"repeatInit",args:[u,a,f],op:function(e,t,n,s){var r,o={index:0,value:t,eventFired:!1};return e.meta.iterators[i]=o,t&&t[Symbol.iterator]&&(o.iterator=t[Symbol.iterator]()),a&&(r=s||e.me,r.addEventListener(n,function(){e.meta.iterators[i].eventFired=!0},{once:!0})),m},execute:function(e){return n.unifiedExec(this,e)}},e.setParent(m,v),v},n.addCommand("repeat",function(e,t,n){if(n.matchToken("repeat"))return u(e,n,t,!1)}),n.addCommand("for",function(e,t,n){if(n.matchToken("for"))return u(e,n,t,!0)}),n.addCommand("continue",function(e,t,n){if(!n.matchToken("continue"))return;var s={op:function(t){for(var s=this.parent;!0;s=s.parent)if(s==null&&e.raiseParseError(n,"Command `continue` cannot be used outside of a `repeat` loop."),s.loop!=void 0)return s.resolveNext(t)}};return s}),n.addCommand("break",function(e,t,n){if(!n.matchToken("break"))return;var s={op:function(s){for(var o=this.parent;!0;o=o.parent)if(o==null&&e.raiseParseError(n,"Command `continue` cannot be used outside of a `repeat` loop."),o.loop!=void 0)return t.findNext(o.parent,s)}};return s}),n.addGrammarElement("stringLike",function(e,t,n){return e.parseAnyOf(["string","nakedString"],n)}),n.addCommand("append",function(e,t,n){if(!n.matchToken("append"))return;var o,a,s=null,r=e.requireElement("expression",n),c={type:"symbol",evaluate:function(e){return t.resolveSymbol("result",e)}};return n.matchToken("to")?s=e.requireElement("expression",n):s=c,o=null,(s.type==="symbol"||s.type==="attributeRef"||s.root!=null)&&(o=i(e,t,n,s,c)),a={value:r,target:s,args:[s,r],op:function(e,n,s){if(Array.isArray(n))return n.push(s),t.findNext(this,e);if(n instanceof Element)return n.innerHTML+=s,t.findNext(this,e);if(o)return e.result=(n||"")+s,o;throw Error("Unable to append a value!")},execute:function(e){return t.unifiedExec(this,e)}},o!=null&&(o.parent=a),a});function O(e,t,n){n.matchToken("at")||n.matchToken("from");const s={includeStart:!0,includeEnd:!1};return s.from=n.matchToken("start")?0:e.requireElement("expression",n),(n.matchToken("to")||n.matchOpToken(".."))&&(n.matchToken("end")?s.toEnd=!0:s.to=e.requireElement("expression",n)),n.matchToken("inclusive")?s.includeEnd=!0:n.matchToken("exclusive")&&(s.includeStart=!1),s}class x{constructor(e,t){this.re=e,this.str=t}next(){const e=this.re.exec(this.str);return e===null?{done:!0}:{value:e}}}class C{constructor(e,t,n){this.re=e,this.flags=t,this.str=n}[Symbol.iterator](){return new x(new RegExp(this.re,this.flags),this.str)}}n.addCommand("pick",(e,t,n)=>{if(!n.matchToken("pick"))return;if(n.matchToken("the"),n.matchToken("item")||n.matchToken("items")||n.matchToken("character")||n.matchToken("characters")){const s=O(e,t,n);n.requireToken("from");const o=e.requireElement("expression",n);return{args:[o,s.from,s.to],op(e,n,o,i){return s.toEnd&&(i=n.length),s.includeStart||o++,s.includeEnd&&i++,(i==null)&&(i=o+1),e.result=n.slice(o,i),t.findNext(this,e)}}}if(n.matchToken("match")){n.matchToken("of");const o=e.parseElement("expression",n);let s="";n.matchOpToken("|")&&(s=n.requireToken("identifier").value),n.requireToken("from");const i=e.parseElement("expression",n);return{args:[i,o],op(e,n,o){return e.result=new RegExp(o,s).exec(n),t.findNext(this,e)}}}if(n.matchToken("matches")){n.matchToken("of");const o=e.parseElement("expression",n);let s="gu";n.matchOpToken("|")&&(s="g"+n.requireToken("identifier").value.replace("g","")),console.log("flags",s),n.requireToken("from");const i=e.parseElement("expression",n);return{args:[i,o],op(e,n,o){return e.result=new C(o,s,n),t.findNext(this,e)}}}}),n.addCommand("increment",function(e,t,n){if(!n.matchToken("increment"))return;var s,a,o=e.parseElement("assignableExpression",n);return n.matchToken("by")&&(s=e.requireElement("expression",n)),a={type:"implicitIncrementOp",target:o,args:[o,s],op:function(e,t,n){t=t?parseFloat(t):0,n=s?parseFloat(n):1;var o=t+n;return e.result=o,o},evaluate:function(e){return t.unifiedEval(this,e)}},i(e,t,n,o,a)}),n.addCommand("decrement",function(e,t,n){if(!n.matchToken("decrement"))return;var s,a,o=e.parseElement("assignableExpression",n);return n.matchToken("by")&&(s=e.requireElement("expression",n)),a={type:"implicitDecrementOp",target:o,args:[o,s],op:function(e,t,n){t=t?parseFloat(t):0,n=s?parseFloat(n):1;var o=t-n;return e.result=o,o},evaluate:function(e){return t.unifiedEval(this,e)}},i(e,t,n,o,a)});function y(e,t){var s,n="text";return e.matchToken("a")||e.matchToken("an"),e.matchToken("json")||e.matchToken("Object")?n="json":e.matchToken("response")?n="response":e.matchToken("html")?n="html":e.matchToken("text")||(s=t.requireElement("dotOrColonPath",e).evaluate()),{type:n,conversion:s}}n.addCommand("fetch",function(e,t,n){if(!n.matchToken("fetch"))return;var s,o,i,a,r,c=e.requireElement("stringLike",n);return n.matchToken("as")&&(s=y(n,e)),n.matchToken("with")&&n.currentToken().value!=="{"?(i=e.parseElement("nakedNamedArgumentList",n)):(i=e.parseElement("objectLiteral",n)),s==null&&n.matchToken("as")&&(s=y(n,e)),a=s?s.type:"text",r=s?s.conversion:null,o={url:c,argExpressions:i,args:[c,i],op:function(e,n,s){var c,l,i=s||{};i.sender=e.me,i.headers=i.headers||{},l=new AbortController;let d=e.me.addEventListener("fetch:abort",function(){l.abort()},{once:!0});return i.signal=l.signal,t.triggerEvent(e.me,"hyperscript:beforeFetch",i),t.triggerEvent(e.me,"fetch:beforeRequest",i),s=i,c=!1,s.timeout&&setTimeout(function(){c||l.abort()},s.timeout),fetch(n,s).then(function(n){let s={response:n};return t.triggerEvent(e.me,"fetch:afterResponse",s),n=s.response,a==="response"?(e.result=n,t.triggerEvent(e.me,"fetch:afterRequest",{result:n}),c=!0,t.findNext(o,e)):a==="json"?n.json().then(function(n){return e.result=n,t.triggerEvent(e.me,"fetch:afterRequest",{result:n}),c=!0,t.findNext(o,e)}):n.text().then(function(n){return r&&(n=t.convertValue(n,r)),a==="html"&&(n=t.convertValue(n,"Fragment")),e.result=n,t.triggerEvent(e.me,"fetch:afterRequest",{result:n}),c=!0,t.findNext(o,e)})}).catch(function(n){throw t.triggerEvent(e.me,"fetch:error",{reason:n}),n}).finally(function(){e.me.removeEventListener("fetch:abort",d)})}},o})}function v(e){e.addCommand("settle",function(e,t,n){if(n.matchToken("settle")){if(e.commandBoundary(n.currentToken()))o=e.requireElement("implicitMeTarget",n);else var s,o=e.requireElement("expression",n);return s={type:"settleCmd",args:[o],op:function(e,n){t.nullCheck(n,o);var i=null,a=!1,r=!1,c=new Promise(function(e){i=e});return n.addEventListener("transitionstart",function(){r=!0},{once:!0}),setTimeout(function(){!r&&!a&&i(t.findNext(s,e))},500),n.addEventListener("transitionend",function(){a||i(t.findNext(s,e))},{once:!0}),c},execute:function(e){return t.unifiedExec(this,e)}},s}}),e.addCommand("add",function(e,t,n){if(n.matchToken("add")){var s,a,r,c=e.parseElement("classRef",n),o=null,i=null;if(c==null)o=e.parseElement("attributeRef",n),o==null&&(i=e.parseElement("styleLiteral",n),i==null&&e.raiseParseError(n,"Expected either a class reference or attribute expression"));else for(a=[c];c=e.parseElement("classRef",n);)a.push(c);return n.matchToken("to")?(s=e.requireElement("expression",n)):(s=e.requireElement("implicitMeTarget",n)),n.matchToken("when")&&(i&&e.raiseParseError(n,"Only class and properties are supported with a when clause"),r=e.requireElement("expression",n)),a?{classRefs:a,to:s,args:[s,a],op:function(e,n,o){return t.nullCheck(n,s),t.forEach(o,function(s){t.implicitLoop(n,function(n){if(r){e.result=n;let o=t.evaluateNoPromise(r,e);o?n instanceof Element&&n.classList.add(s.className):n instanceof Element&&n.classList.remove(s.className),e.result=null}else n instanceof Element&&n.classList.add(s.className)})}),t.findNext(this,e)}}:o?{type:"addCmd",attributeRef:o,to:s,args:[s],op:function(e,n){return t.nullCheck(n,s),t.implicitLoop(n,function(n){if(r){e.result=n;let s=t.evaluateNoPromise(r,e);s?n.setAttribute(o.name,o.value):n.removeAttribute(o.name),e.result=null}else n.setAttribute(o.name,o.value)}),t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}:{type:"addCmd",cssDeclaration:i,to:s,args:[s,i],op:function(e,n,o){return t.nullCheck(n,s),t.implicitLoop(n,function(e){e.style.cssText+=o}),t.findNext(this,e)},execute:function(e){return t.unifiedExec(this,e)}}}}),e.addGrammarElement("styleLiteral",function(e,t,n){if(!n.matchOpToken("{"))return;for(var o,a,r,s=[""],i=[];n.hasMore();){if(n.matchOpToken("\\"))n.consumeToken();else if(n.matchOpToken("}"))break;else n.matchToken("$")?(a=n.matchOpToken("{"),r=e.parseElement("expression",n),a&&n.requireOpToken("}"),i.push(r),s.push("")):(o=n.consumeToken(),s[s.length-1]+=n.source.substring(o.start,o.end));s[s.length-1]+=n.lastWhitespace()}return{type:"styleLiteral",args:[i],op:function(e,t){var n="";return s.forEach(function(e,s){n+=e,s in t&&(n+=t[s])}),n},evaluate:function(e){return t.unifiedEval(this,e)}}}),e.addCommand("remove",function(e,t,n){if(n.matchToken("remove")){var o,r,i=e.parseElement("classRef",n),a=null,s=null;if(i==null)a=e.parseElement("attributeRef",n),a==null&&(s=e.parseElement("expression",n),s==null&&e.raiseParseError(n,"Expected either a class reference, attribute expression or value expression"));else for(r=[i];i=e.parseElement("classRef",n);)r.push(i);return n.matchToken("from")?(o=e.requireElement("expression",n)):s==null&&(o=e.requireElement("implicitMeTarget",n)),s?{elementExpr:s,from:o,args:[s,o],op:function(e,n,o){return t.nullCheck(n,s),t.implicitLoop(n,function(e){e.parentElement&&(o==null||o.contains(e))&&e.parentElement.removeChild(e)}),t.findNext(this,e)}}:{classRefs:r,attributeRef:a,elementExpr:s,from:o,args:[r,o],op:function(e,n,s){return t.nullCheck(s,o),n?t.forEach(n,function(e){t.implicitLoop(s,function(t){t.classList.remove(e.className)})}):t.implicitLoop(s,function(e){e.removeAttribute(a.name)}),t.findNext(this,e)}}}}),e.addCommand("toggle",function(e,t,s){if(s.matchToken("toggle")){if(s.matchAnyToken("the","my"),s.currentToken().type==="STYLE_REF"){let t=s.consumeToken();var o,i,a,r,c,l,d,u,h,m,p=t.value.substr(1),f=!0,g=n(e,s,p);if(s.matchToken("of")){s.pushFollow("with");try{r=e.requireElement("expression",s)}finally{s.popFollow()}}else r=e.requireElement("implicitMeTarget",s)}else if(s.matchToken("between"))m=!0,i=e.parseElement("classRef",s),s.requireToken("and"),l=e.requireElement("classRef",s);else if(i=e.parseElement("classRef",s),a=null,i==null)a=e.parseElement("attributeRef",s),a==null&&e.raiseParseError(s,"Expected either a class reference or attribute expression");else for(c=[i];i=e.parseElement("classRef",s);)c.push(i);return f!==!0&&(s.matchToken("on")?(r=e.requireElement("expression",s)):(r=e.requireElement("implicitMeTarget",s))),s.matchToken("for")?(d=e.requireElement("expression",s)):s.matchToken("until")&&(u=e.requireElement("dotOrColonPath",s,"Expected event name"),s.matchToken("from")&&(h=e.requireElement("expression",s))),o={classRef:i,classRef2:l,classRefs:c,attributeRef:a,on:r,time:d,evt:u,from:h,toggle:function(e,n,s,o){t.nullCheck(e,r),f?t.implicitLoop(e,function(e){g("toggle",e)}):m?t.implicitLoop(e,function(e){e.classList.contains(n.className)?(e.classList.remove(n.className),e.classList.add(s.className)):(e.classList.add(n.className),e.classList.remove(s.className))}):o?t.forEach(o,function(n){t.implicitLoop(e,function(e){e.classList.toggle(n.className)})}):t.forEach(e,function(e){e.hasAttribute(a.name)?e.removeAttribute(a.name):e.setAttribute(a.name,a.value)})},args:[r,d,u,h,i,l,c],op:function(e,n,s,i,a,r,c,l){return s?new Promise(function(i){o.toggle(n,r,c,l),setTimeout(function(){o.toggle(n,r,c,l),i(t.findNext(o,e))},s)}):i?new Promise(function(s){var d=a||e.me;d.addEventListener(i,function(){o.toggle(n,r,c,l),s(t.findNext(o,e))},{once:!0}),o.toggle(n,r,c,l)}):(this.toggle(n,r,c,l),t.findNext(o,e))}},o}});var t={display:function(n,s,o){if(o)s.style.display=o;else if(n==="toggle")getComputedStyle(s).display==="none"?t.display("show",s,o):t.display("hide",s,o);else if(n==="hide"){const t=e.runtime.getInternalData(s);t.originalDisplay==null&&(t.originalDisplay=s.style.display),s.style.display="none"}else{const t=e.runtime.getInternalData(s);t.originalDisplay&&t.originalDisplay!=="none"?s.style.display=t.originalDisplay:s.style.removeProperty("display")}},visibility:function(e,n,s){s?n.style.visibility=s:e==="toggle"?getComputedStyle(n).visibility==="hidden"?t.visibility("show",n,s):t.visibility("hide",n,s):e==="hide"?n.style.visibility="hidden":n.style.visibility="visible"},opacity:function(e,n,s){s?n.style.opacity=s:e==="toggle"?getComputedStyle(n).opacity==="0"?t.opacity("show",n,s):t.opacity("hide",n,s):e==="hide"?n.style.opacity="0":n.style.opacity="1"}},o=function(e,t,n){var s,o=n.currentToken();return o.value==="when"||o.value==="with"||e.commandBoundary(o)?s=e.parseElement("implicitMeTarget",n):s=e.parseElement("expression",n),s},n=function(e,n,o){var a,r=s.defaultHideShowStrategy,i=t;return s.hideShowStrategies&&(i=Object.assign(i,s.hideShowStrategies)),o=o||r||"display",a=i[o],a==null&&e.raiseParseError(n,"Unknown show/hide strategy : "+o),a};e.addCommand("hide",function(e,t,s){if(s.matchToken("hide")){var r,a=o(e,t,s),i=null;return s.matchToken("with")&&(i=s.requireTokenType("IDENTIFIER","STYLE_REF").value,i.indexOf("*")===0&&(i=i.substr(1))),r=n(e,s,i),{target:a,args:[a],op:function(e,n){return t.nullCheck(n,a),t.implicitLoop(n,function(e){r("hide",e)}),t.findNext(this,e)}}}}),e.addCommand("show",function(e,t,s){if(s.matchToken("show")){var a,r,c,d,l=o(e,t,s),i=null;return s.matchToken("with")&&(i=s.requireTokenType("IDENTIFIER","STYLE_REF").value,i.indexOf("*")===0&&(i=i.substr(1))),a=null,s.matchOpToken(":")&&(d=s.consumeUntilWhitespace(),s.matchTokenType("WHITESPACE"),a=d.map(function(e){return e.value}).join("")),s.matchToken("when")&&(r=e.requireElement("expression",s)),c=n(e,s,i),{target:l,when:r,args:[l],op:function(e,n){return t.nullCheck(n,l),t.implicitLoop(n,function(n){if(r){e.result=n;let s=t.evaluateNoPromise(r,e);s?c("show",n,a):c("hide",n),e.result=null}else c("show",n,a)}),t.findNext(this,e)}}}}),e.addCommand("take",function(e,t,n){if(n.matchToken("take")){var s,o,r,a=e.parseElement("classRef",n),i=null,c=null;return a==null&&(i=e.parseElement("attributeRef",n),i==null&&e.raiseParseError(n,"Expected either a class reference or attribute expression"),n.matchToken("with")&&(c=e.requireElement("expression",n))),n.matchToken("from")?(s=e.requireElement("expression",n)):(s=a),n.matchToken("for")?(o=e.requireElement("expression",n)):(o=e.requireElement("implicitMeTarget",n)),a?(r={classRef:a,from:s,forElt:o,args:[a,s,o],op:function(e,n,i,a){t.nullCheck(i,s),t.nullCheck(a,o);var r=n.className;return t.implicitLoop(i,function(e){e.classList.remove(r)}),t.implicitLoop(a,function(e){e.classList.add(r)}),t.findNext(this,e)}},r):(r={attributeRef:i,from:s,forElt:o,args:[s,o,c],op:function(e,n,a,r){return t.nullCheck(n,s),t.nullCheck(a,o),t.implicitLoop(n,function(e){r?e.setAttribute(i.name,r):e.removeAttribute(i.name)}),t.implicitLoop(a,function(e){e.setAttribute(i.name,i.value||"")}),t.findNext(this,e)}},r)}});function i(t,n,s,o){if(s!=null)var i=t.resolveSymbol(s,n);else i=n;if(i instanceof Element||i instanceof HTMLDocument){for(;i.firstChild;)i.removeChild(i.firstChild);i.append(e.runtime.convertValue(o,"Fragment")),t.processNode(i)}else if(s!=null)t.setSymbol(s,n,null,o);else throw"Don't know how to put a value into "+typeof n}e.addCommand("put",function(e,t,n){if(n.matchToken("put")){var s,o,a,r,l,d,u,h,f,m=e.requireElement("expression",n),c=n.matchAnyToken("into","before","after");return c==null&&n.matchToken("at")&&(n.matchToken("the"),c=n.matchAnyToken("start","end"),n.requireToken("of")),c==null&&e.raiseParseError(n,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'"),s=e.requireElement("expression",n),o=c.value,d=!1,l=!1,a=null,r=null,s.type==="arrayIndex"&&o==="into"?(d=!0,r=s.prop,a=s.root):s.prop&&s.root&&o==="into"?(r=s.prop.value,a=s.root):s.type==="symbol"&&o==="into"?(l=!0,r=s.name):s.type==="attributeRef"&&o==="into"?(u=!0,r=s.name,a=e.requireElement("implicitMeTarget",n)):s.type==="styleRef"&&o==="into"?(h=!0,r=s.name,a=e.requireElement("implicitMeTarget",n)):s.attribute&&o==="into"?(u=s.attribute.type==="attributeRef",h=s.attribute.type==="styleRef",r=s.attribute.name,a=s.root):a=s,f={target:s,operation:o,symbolWrite:l,value:m,args:[a,r,m],op:function(e,n,s,r){if(l)i(t,e,s,r);else if(t.nullCheck(n,a),o==="into")u?t.implicitLoop(n,function(e){e.setAttribute(s,r)}):h?t.implicitLoop(n,function(e){e.style[s]=r}):d?n[s]=r:t.implicitLoop(n,function(e){i(t,e,s,r)});else{var c=o==="before"?Element.prototype.before:o==="after"?Element.prototype.after:o==="start"?Element.prototype.prepend:o==="end"?Element.prototype.append:Element.prototype.append;t.implicitLoop(n,function(e){c.call(e,r instanceof Node?r:t.convertValue(r,"Fragment")),e.parentElement?t.processNode(e.parentElement):t.processNode(e)})}return t.findNext(this,e)}},f}});function a(e,t,n){if(n.matchToken("the")||n.matchToken("element")||n.matchToken("elements")||n.currentToken().type==="CLASS_REF"||n.currentToken().type==="ID_REF"||n.currentToken().op&&n.currentToken().value==="<"){e.possessivesDisabled=!0;try{s=e.parseElement("expression",n)}finally{delete e.possessivesDisabled}n.matchOpToken("'")&&n.requireToken("s")}else if(n.currentToken().type==="IDENTIFIER"&&n.currentToken().value==="its"){var s,o=n.matchToken("its");s={type:"pseudopossessiveIts",token:o,name:o.value,evaluate:function(e){return t.resolveSymbol("it",e)}}}else n.matchToken("my")||n.matchToken("me"),s=e.parseElement("implicitMeTarget",n);return s}e.addCommand("transition",function(e,t,n){if(n.matchToken("transition")){for(var l,u,h,d=a(e,t,n),r=[],c=[],o=[],i=n.currentToken();!e.commandBoundary(i)&&i.value!=="over"&&i.value!=="using";){if(n.currentToken().type==="STYLE_REF"){let e=n.consumeToken(),t=e.value.substr(1);r.push({type:"styleRefValue",evaluate:function(){return t}})}else r.push(e.requireElement("stringLike",n));n.matchToken("from")?c.push(e.requireElement("expression",n)):c.push(null),n.requireToken("to"),n.matchToken("initial")?o.push({type:"initial_literal",evaluate:function(){return"initial"}}):o.push(e.requireElement("expression",n)),i=n.currentToken()}return n.matchToken("over")?(u=e.requireElement("expression",n)):n.matchToken("using")&&(h=e.requireElement("expression",n)),l={to:o,args:[d,r,c,o,h,u],op:function(e,n,o,i,a,r,c){t.nullCheck(n,d);var u=[];return t.implicitLoop(n,function(e){var n=new Promise(function(n){var d,u,h,m,f,p,g,v,b,y,j=e.style.transition;c?e.style.transition="all "+c+"ms ease-in":r?e.style.transition=r:e.style.transition=s.defaultTransition,h=t.getInternalData(e),m=getComputedStyle(e),f={};for(d=0;d<m.length;d++)v=m[d],y=m[v],f[v]=y;h.initalStyles||(h.initalStyles=f);for(d=0;d<o.length;d++)p=o[d],g=i[d],g==="computed"||g==null?e.style[p]=f[p]:e.style[p]=g;b=!1,u=!1,e.addEventListener("transitionend",function(){u||(e.style.transition=j,u=!0,n())},{once:!0}),e.addEventListener("transitionstart",function(){b=!0},{once:!0}),setTimeout(function(){!u&&!b&&(e.style.transition=j,u=!0,n())},100),setTimeout(function(){for(var n,s,i,r=[],t=0;t<o.length;t++)n=o[t],s=a[t],s==="initial"?(i=h.initalStyles[n],e.style[n]=i):e.style[n]=s},0)});u.push(n)}),Promise.all(u).then(function(){return t.findNext(l,e)})}},l}}),e.addCommand("measure",function(e,t,n){if(!n.matchToken("measure"))return;var o=a(e,t,n),s=[];if(!e.commandBoundary(n.currentToken()))do s.push(n.matchTokenType("IDENTIFIER").value);while(n.matchOpToken(","))return{properties:s,args:[o],op:function(e,n){t.nullCheck(n,o),0 in n&&(n=n[0]);var i=n.getBoundingClientRect(),a={top:n.scrollTop,left:n.scrollLeft,topMax:n.scrollTopMax,leftMax:n.scrollLeftMax,height:n.scrollHeight,width:n.scrollWidth};return e.result={x:i.x,y:i.y,left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height,bounds:i,scrollLeft:a.left,scrollTop:a.top,scrollLeftMax:a.leftMax,scrollTopMax:a.topMax,scrollWidth:a.width,scrollHeight:a.height,scroll:a},t.forEach(s,function(t){if(t in e.result)e.locals[t]=e.result[t];else throw"No such measurement as "+t}),t.findNext(this,e)}}}),e.addLeafExpression("closestExpr",function(e,t,n){if(n.matchToken("closest")){if(n.matchToken("parent"))var s,o,i,a,r,c=!0;return s=null,n.currentToken().type==="ATTRIBUTE_REF"&&(o=e.requireElement("attributeRefAccess",n,null),s="["+o.attribute.name+"]"),s==null&&(i=e.requireElement("expression",n),i.css==null?e.raiseParseError(n,"Expected a CSS expression"):s=i.css),n.matchToken("to")?(a=e.parseElement("expression",n)):(a=e.parseElement("implicitMeTarget",n)),r={type:"closestExpr",parentSearch:c,expr:i,css:s,to:a,args:[a],op:function(e,n){if(n==null)return null;let o=[];return t.implicitLoop(n,function(e){c?o.push(e.parentElement?e.parentElement.closest(s):null):o.push(e.closest(s))}),t.shouldAutoIterate(n)?o:o[0]},evaluate:function(e){return t.unifiedEval(this,e)}},o?(o.root=r,o.args=[r],o):r}}),e.addCommand("go",function(e,t,n){if(n.matchToken("go")){if(n.matchToken("back"))var s,o,i,a,r,c,l,d,u,h,m=!0;else if(n.matchToken("to"),n.matchToken("url"))a=e.requireElement("stringLike",n),d=!0,n.matchToken("in")&&(n.requireToken("new"),n.requireToken("window"),u=!0);else{if(n.matchToken("the"),o=n.matchAnyToken("top","middle","bottom"),i=n.matchAnyToken("left","center","right"),(o||i)&&n.requireToken("of"),a=e.requireElement("unaryExpression",n),r=n.matchAnyOpToken("+","-"),r){n.pushFollow("px");try{h=e.requireElement("expression",n)}finally{n.popFollow()}}n.matchToken("px"),c=n.matchAnyToken("smoothly","instantly"),s={},o&&(o.value==="top"?s.block="start":o.value==="bottom"?s.block="end":o.value==="middle"&&(s.block="center")),i&&(i.value==="left"?s.inline="start":i.value==="center"?s.inline="center":i.value==="right"&&(s.inline="end")),c&&(c.value==="smoothly"?s.behavior="smooth":c.value==="instantly"&&(s.behavior="instant"))}return l={target:a,args:[a,h],op:function(e,n,o){return m?window.history.back():d?n&&(u?window.open(n):window.location.href=n):t.implicitLoop(n,function(e){if(e===window&&(e=document.body),r){var t,n=e.getBoundingClientRect();let s=document.createElement("div");r.value==="-"?(t=-o):(t=- -o),s.style.position="absolute",s.style.top=n.x+t+"px",s.style.left=n.y+t+"px",s.style.height=n.height+2*t+"px",s.style.width=n.width+2*t+"px",s.style.zIndex=""+Number.MIN_SAFE_INTEGER,s.style.opacity="0",document.body.appendChild(s),setTimeout(function(){document.body.removeChild(s)},100),e=s}e.scrollIntoView(s)}),t.findNext(l,e)}},l}}),s.conversions.dynamicResolvers.push(function(t,n){if(t!=="Values"&&t.indexOf("Values:")!==0)return;var o=t.split(":")[1],s={},a=e.runtime.implicitLoop.bind(e.runtime);if(a(n,function(e){var n,t=i(e);if(t!==void 0){s[t.name]=t.value;return}e.querySelectorAll!=void 0&&(n=e.querySelectorAll("input,select,textarea"),n.forEach(r))}),o){if(o==="JSON")return JSON.stringify(s);if(o==="Form")return new URLSearchParams(s).toString();throw"Unknown conversion: "+o}else return s;function r(e){var t=i(e);if(t==null)return;if(s[t.name]==void 0){s[t.name]=t.value;return}if(Array.isArray(s[t.name])&&Array.isArray(t.value)){s[t.name]=[].concat(s[t.name],t.value);return}}function i(e){try{var n,s,t={name:e.name,value:e.value};if(t.name==void 0||t.value==void 0)return void 0;if(e.type=="radio"&&e.checked==!1)return void 0;if(e.type=="checkbox"&&(e.checked==!1?t.value=void 0:typeof t.value=="string"&&(t.value=[t.value])),e.type=="select-multiple"){s=e.querySelectorAll("option[selected]"),t.value=[];for(n=0;n<s.length;n++)t.value.push(s[n].value)}return t}catch{return void 0}}}),s.conversions.HTML=function(e){var t=function(e){if(e instanceof Array)return e.map(function(e){return t(e)}).join("");if(e instanceof HTMLElement)return e.outerHTML;if(e instanceof NodeList){for(var s,o="",n=0;n<e.length;n++)s=e[n],s instanceof HTMLElement&&(o+=s.outerHTML);return o}return e.toString?e.toString():""};return t(e)},s.conversions.Fragment=function(t){var n=document.createDocumentFragment();return e.runtime.implicitLoop(t,function(e){if(e instanceof Node)n.append(e);else{var t=document.createElement("template");t.innerHTML=e,n.append(t.content)}}),n}}const n=new o,_=n.lexer,i=n.parser;function O(e,t){return n.evaluate(e,t)}function x(){var t=Array.from(e.document.querySelectorAll("script[type='text/hyperscript'][src]"));Promise.all(t.map(function(e){return fetch(e.src).then(function(e){return e.text()})})).then(e=>e.forEach(e=>d(e))).then(()=>o(function(){a(),n.processNode(document.documentElement),e.document.addEventListener("htmx:load",function(e){n.processNode(e.detail.elt)})}));function o(e){document.readyState!=="loading"?setTimeout(e):document.addEventListener("DOMContentLoaded",e)}function i(){var e=document.querySelector('meta[name="htmx-config"]');return e?C(e.content):null}function a(){var e=i();e&&Object.assign(s,e)}}const d=Object.assign(O,{config:s,use(e){e(d)},internals:{lexer:_,parser:i,runtime:n,Lexer:t,Tokens:r,Parser:c,Runtime:o},ElementCollection:a,addFeature:i.addFeature.bind(i),addCommand:i.addCommand.bind(i),addLeafExpression:i.addLeafExpression.bind(i),addIndirectExpression:i.addIndirectExpression.bind(i),evaluate:n.evaluate.bind(n),parse:n.parse.bind(n),processNode:n.processNode.bind(n),browserInit:x});return d})