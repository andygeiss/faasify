// Code generated by fassify DO NOT EDIT
package server

import (
	"embed"
    "io/fs"
	"net/http"
)

//go:embed static
var embedFS embed.FS

//go:generate go run ../../../cmd/update-functions/main.go

const Token = "{{ .Token }}"

func router() (mux *http.ServeMux) {
    // Init multiplexer
	mux = http.NewServeMux()

    // Add functions
	{{ range .Functions }}mux.HandleFunc("/function/{{ . }}", WithAuthentication(WithLogging(WithStatistics({{ . }}.HandlerFunc()))))
	{{ end }}
    // Serve statistics
    mux.HandleFunc("/stats", WithAuthentication(WithLogging(statsHandler())))

    // Serve embedded files
    mux.HandleFunc("/", WithEmbeddedFiles(embedFS, "static"))
	return
}
